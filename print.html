<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="index.html">Home</a></li><li class="chapter-item affix "><li class="part-title">src</li><li class="chapter-item "><a href="src/factory/index.html">❱ factory</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/factory/IGOFactory.sol/contract.IGOFactory.html">IGOFactory</a></li><li class="chapter-item "><a href="src/factory/IIGOFactory.sol/interface.IIGOFactory.html">IIGOFactory</a></li><li class="chapter-item "><a href="src/factory/IIGOFactoryInternal.sol/interface.IIGOFactoryInternal.html">IIGOFactoryInternal</a></li></ol></li><li class="chapter-item "><a href="src/lzApp/index.html">❱ lzApp</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lzApp/interfaces/index.html">❱ interfaces</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lzApp/interfaces/internal/index.html">❱ internal</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lzApp/interfaces/internal/IClaimFactoryInternal.sol/interface.IClaimFactoryInternal.html">IClaimFactoryInternal</a></li><li class="chapter-item "><a href="src/lzApp/interfaces/internal/ICrosschainErrorsInternal.sol/interface.ICrosschainErrorsInternal.html">ICrosschainErrorsInternal</a></li><li class="chapter-item "><a href="src/lzApp/interfaces/internal/IHostInternal.sol/interface.IHostInternal.html">IHostInternal</a></li><li class="chapter-item "><a href="src/lzApp/interfaces/internal/ITargetInternal.sol/interface.ITargetInternal.html">ITargetInternal</a></li></ol></li><li class="chapter-item "><a href="src/lzApp/interfaces/IClaimFactory.sol/interface.IClaimFactory.html">IClaimFactory</a></li><li class="chapter-item "><a href="src/lzApp/interfaces/IHost.sol/interface.IHost.html">IHost</a></li><li class="chapter-item "><a href="src/lzApp/interfaces/ITarget.sol/interface.ITarget.html">ITarget</a></li></ol></li><li class="chapter-item "><a href="src/lzApp/ClaimFactory.sol/contract.ClaimFactory.html">ClaimFactory</a></li><li class="chapter-item "><a href="src/lzApp/LzClaimRefundTargetChain.sol/contract.LzClaimRefundTargetChain.html">LzClaimRefundTargetChain</a></li><li class="chapter-item "><a href="src/lzApp/LzStorage.sol/library.LzStorage.html">LzStorage</a></li><li class="chapter-item "><a href="src/lzApp/LzVestingHostChain.sol/contract.LzVestingHostChain.html">LzVestingHostChain</a></li></ol></li><li class="chapter-item "><a href="src/readable/index.html">❱ readable</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/readable/IGOReadable.sol/contract.IGOReadable.html">IGOReadable</a></li><li class="chapter-item "><a href="src/readable/IIGOReadable.sol/interface.IIGOReadable.html">IIGOReadable</a></li></ol></li><li class="chapter-item "><a href="src/shared/index.html">❱ shared</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/shared/ISharedInternal.sol/interface.ISharedInternal.html">ISharedInternal</a></li></ol></li><li class="chapter-item "><a href="src/writable/index.html">❱ writable</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/writable/restricted/index.html">❱ restricted</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/writable/restricted/IRestrictedWritable.sol/interface.IRestrictedWritable.html">IRestrictedWritable</a></li><li class="chapter-item "><a href="src/writable/restricted/IRestrictedWritableInternal.sol/interface.IRestrictedWritableInternal.html">IRestrictedWritableInternal</a></li><li class="chapter-item "><a href="src/writable/restricted/RestrictedWritable.sol/contract.RestrictedWritable.html">RestrictedWritable</a></li><li class="chapter-item "><a href="src/writable/restricted/RestrictedWritableInternal.sol/contract.RestrictedWritableInternal.html">RestrictedWritableInternal</a></li></ol></li><li class="chapter-item "><a href="src/writable/IGOWritable.sol/contract.IGOWritable.html">IGOWritable</a></li><li class="chapter-item "><a href="src/writable/IGOWritableInternal.sol/contract.IGOWritableInternal.html">IGOWritableInternal</a></li><li class="chapter-item "><a href="src/writable/IIGOWritable.sol/interface.IIGOWritable.html">IIGOWritable</a></li><li class="chapter-item "><a href="src/writable/IIGOWritableInternal.sol/interface.IIGOWritableInternal.html">IIGOWritableInternal</a></li></ol></li><li class="chapter-item "><a href="src/IGO.sol/contract.IGO.html">IGO</a></li><li class="chapter-item "><a href="src/IGOStorage.sol/library.IGOStorage.html">IGOStorage</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/Seedifyfund/igo-all-in-one" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="all-in-one-igo"><a class="header" href="#all-in-one-igo"><h1 align="center"> All-In-One IGO </a></h1></h1>
<p>Contract to use for normal &amp; VPR IGO but also any other extra cases where a project wants to allow people to buy tokens at a set price.</p>
<p>More details on <a href="https://seedifymetastudios.atlassian.net/l/cp/bcc1Xhfr">Confluence</a></p>
<h2 id="install"><a class="header" href="#install">Install</a></h2>
<pre><code class="language-bash">yarn install &amp;&amp; forge install
</code></pre>
<p>Each time a new dependency is added in <code>lib/</code> run <code>forge install</code>.</p>
<h2 id="architecture"><a class="header" href="#architecture">Architecture</a></h2>
<p>Follow's Solidstate architecture (diamond pattern based).</p>
<div class="table-wrapper"><table><thead><tr><th><strong>folder</strong></th><th><strong>layer</strong></th><th><strong>description</strong></th><th><strong>example</strong></th></tr></thead><tbody>
<tr><td><strong>-</strong></td><td>internal - <code>interface</code></td><td>contains custom <code>error</code>, <code>enum</code>, <code>struct</code>&amp; <code>event</code></td><td><code>IRandomnessWritableInternal.sol</code>, <code>IRandomnessReadableInternal.sol</code></td></tr>
<tr><td><strong>-</strong></td><td>external - <code>interface</code></td><td>common interfaces which define external and public function's prototypes</td><td><code>IRandomnessFallback.sol</code>, <code>IRandomnessReadble.sol</code>, <code>IRandomnessWritable.sol</code></td></tr>
<tr><td><strong>readable</strong></td><td>external</td><td>set of functions which only read the storage</td><td><code>RandomnessReadable.sol</code></td></tr>
<tr><td><strong>writable</strong></td><td>external &amp; internal</td><td>set of functions which update storage; internal function always declares in <code>xyzWritableInternal.sol</code> &amp; contains <code>modifier</code></td><td><code>RandomnessInternalWritable.sol</code>, <code>RandomnessWritable.sol</code></td></tr>
<tr><td><strong>./</strong></td><td>storage</td><td>library for to map, access and modify storage</td><td><code>RandomnessStorage.sol</code></td></tr>
</tbody></table>
</div>
<h2 id="tests"><a class="header" href="#tests">Tests</a></h2>
<p>Since Permit 2 has been integrated <code> --via-ir</code> compilation is compulsory to solve <code>stak too deep</code> issue.</p>
<ul>
<li>Run without fuzz testing, use <code>forge test -vvv --nmc Differential --via-ir</code></li>
<li>Run with fuzz testing, use <code>forge test -vvv --ffi --via-ir</code> (takes more time as it produced random data)</li>
</ul>
<h3 id="generate-coverage-report"><a class="header" href="#generate-coverage-report">Generate Coverage Report</a></h3>
<p>If <code>lcov</code> is not installed, run <code>brew install lcov</code>.
Then run: <code>forge coverage --report lcov --ffi --nmc Differential &amp;&amp; genhtml lcov.info --branch-coverage --output-dir coverage</code></p>
<h3 id="coverage-screenshot"><a class="header" href="#coverage-screenshot">Coverage Screenshot</a></h3>
<img width="1501" alt="igo-coverage" src="https://user-images.githubusercontent.com/37904797/235130979-e8b8c02c-927e-47be-bfb9-5603aa35f259.png">
<h3 id="run-github-actions-locally"><a class="header" href="#run-github-actions-locally">Run GitHub Actions Locally</a></h3>
<ol>
<li>Install <a href="https://github.com/nektos/act">act</a></li>
<li>Load env var <code>source .env</code></li>
<li>Run a job: <code>act -j foundry -s SEED</code> (hit ENTER when asked <code>Provide value for 'SEED':</code>)</li>
</ol>
<h2 id="run-advanced-tests"><a class="header" href="#run-advanced-tests">Run Advanced Tests</a></h2>
<h3 id="slither"><a class="header" href="#slither">Slither</a></h3>
<p><code>slither .</code></p>
<p>Note: Slither has been added to GitHub actions, so it will run automatically on every <strong>push and pull requests</strong>.</p>
<h3 id="mythril"><a class="header" href="#mythril">Mythril</a></h3>
<p><code>myth a src/IGO.sol --solc-json mythril.config.json</code> (you can use both <code>myth a</code> and <code>mythril analyze</code>)</p>
<h3 id="manticore"><a class="header" href="#manticore">Manticore</a></h3>
<ol>
<li>Run Docker container:</li>
</ol>
<pre><code>docker run --rm -it --platform linux/amd64 \
-v $(pwd):/home/igo \
baolean/manticore:latest
</code></pre>
<ol start="2">
<li>
<p>Go to mounted volume location: <code>cd /home/igo</code></p>
</li>
<li>
<p>Select Solidity version</p>
</li>
</ol>
<pre><code>solc-select install 0.8.17 &amp;&amp; solc-select use 0.8.17
</code></pre>
<ol start="4">
<li>Run manticore:</li>
</ol>
<pre><code>manticore src/IGO.sol --contract IGO --solc-remaps=&quot;openzeppelin-contracts/=lib/openzeppelin-contracts/contracts/ permit2/=lib/permit2/src/&quot;
</code></pre>
<h3 id="sumo"><a class="header" href="#sumo">SuMo</a></h3>
<p>After install yarn dependencies, run <code>yarn sumo test</code> to run mutation testing.</p>
<p><em>Note: there issues as we can specificy <code>--ffi</code> parameter when compiling with forge</em></p>
<h3 id="gambit"><a class="header" href="#gambit">Gambit</a></h3>
<ol>
<li>
<p>Install it locally, <a href="https://github.com/Certora/gambit?utm_campaign=Gambit%20Release&amp;utm_source=Medium&amp;utm_medium=Blog#installation">see GitHub</a></p>
</li>
<li>
<p>Run: <code>gambit mutate --json gambit-conf.json</code></p>
</li>
</ol>
<p><em>Note: gambit does not take into account specified remappings</em></p>
<h2 id="best-practices-to-follow"><a class="header" href="#best-practices-to-follow">Best Practices to Follow</a></h2>
<h3 id="generics"><a class="header" href="#generics">Generics</a></h3>
<ul>
<li>Code formatter &amp; linter: prettier, solhint, husky, lint-staged &amp; husky</li>
<li><a href="https://book.getfoundry.sh/tutorials/best-practices">Foundry</a></li>
</ul>
<h3 id="security"><a class="header" href="#security">Security</a></h3>
<ul>
<li><a href="https://github.com/fravoll/solidity-patterns">Solidity Patterns</a></li>
<li><a href="https://github.com/transmissions11/solcurity">Solcurity Codes</a></li>
<li>Secureum posts <em>(<a href="https://secureum.substack.com/p/security-pitfalls-and-best-practices-101">101</a> &amp; <a href="https://secureum.substack.com/p/security-pitfalls-and-best-practices-201">101</a>: Security Pitfalls &amp; Best Practice)</em></li>
<li><a href="https://github.com/securing/SCSVS">Smart Contract Security Verification Standard</a></li>
<li><a href="https://swcregistry.io">SWC</a></li>
</ul>
<h2 id="be-prepared-for-audits"><a class="header" href="#be-prepared-for-audits">Be Prepared For Audits</a></h2>
<p>Must Do Checklist:</p>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
Unit (<a href="https://r-code.notion.site/TDDs-steps-cecba0a82ee6466f9f479ca553949be2">TDD</a>) &amp; integration (BDD) tests (green)</li>
<li><input disabled="" type="checkbox" checked=""/>
Well refactored &amp; commented code
<ul>
<li><em>Use where needed: NatSpec comment, <a href="https://plantuml.com/starting">PlantUML</a>, <a href="https://github.com/naddison36/sol2uml">Sol2UML</a> (UML for Solidity)</em></li>
</ul>
</li>
<li>Internal Audit - Tool Suite
<ul>
<li><input disabled="" type="checkbox" checked=""/>
Secureum articles
<ul>
<li><a href="https://secureum.substack.com/p/audit-techniques-and-tools-101">Audit Techniques &amp; Tools 101</a></li>
<li><a href="https://secureum.substack.com/p/audit-findings-101">Audit Findings 101</a></li>
<li><a href="https://secureum.substack.com/p/audit-findings-201">Audit Findings 201</a></li>
</ul>
</li>
<li><input disabled="" type="checkbox" checked=""/>
Built in Foundry:
<ul>
<li><input disabled="" type="checkbox" checked=""/>
fuzz testing: generate (semi-)random inputs
<ul>
<li><em>There is also echidna which can be used</em></li>
</ul>
</li>
<li><input disabled="" type="checkbox" checked=""/>
differential testing</li>
<li><input disabled="" type="checkbox" checked=""/>
invariant testing</li>
</ul>
</li>
<li><input disabled="" type="checkbox" checked=""/>
Static analysers: <strong>mythril</strong>, <strong>slither</strong> (GitHub actions), securify, smartcheck, oyente
<ul>
<li><em>Note: solidity smt checker can be used on top for formal verification testing</em></li>
</ul>
</li>
<li><input disabled="" type="checkbox" checked=""/>
Symbolic execution: manticore</li>
<li><input disabled="" type="checkbox" checked=""/>
Mutation testing: SuMo, Gambit, universalmutator</li>
<li><input disabled="" type="checkbox"/>
Audit report generator: MythX</li>
</ul>
</li>
</ul>
<p><em>Note: For more complex contract <strong>Paper code review</strong> should be considered to check for conception &amp; logic errors.</em></p>
<p>Other tools for a deeper analysis:</p>
<ul>
<li>static binary EVM analysis: rattle</li>
<li>control flow graph: surya (integrated into VSCode extension), evm_cfg_builder</li>
<li>disassemble EVM code: ethersplay, pyevmasm</li>
<li>runtime verification: scribble (also done by: mythril, harvey, mythx)</li>
<li>JSON RPC multiplexer, analysis tool wrapper &amp; test integration tool: etheno (Ethereum testing Swiss Army knife)
<ul>
<li><em>eliminates the complexity of tools like Echidna on large, multi-contract projects</em></li>
</ul>
</li>
</ul>
<h2 id="deployed-addresses"><a class="header" href="#deployed-addresses">Deployed Addresses</a></h2>
<ul>
<li>Factory:
<ul>
<li>v1.0: <code>0x619BE601822B5e5DBD8afCB56431D6676CcA2734</code> <a href="https://testnet.bscscan.com/address/0x619be601822b5e5dbd8afcb56431d6676cca2734">bsc testnet</a></li>
<li>v1.1 (vesting schedue): <code>0x35C2309555b7B44e3f889A417ec9e4f757B9717e</code> <a href="https://testnet.bscscan.com/address/0x35C2309555b7B44e3f889A417ec9e4f757B9717e">bsc testnet</a></li>
</ul>
</li>
<li>IGO:
<ul>
<li>v1.0: <code>0x64b22ECcFC51829E4Ed7bED684CD1C8E5304E544</code> <a href="https://testnet.bscscan.com/address/0x64b22ECcFC51829E4Ed7bED684CD1C8E5304E544">bsc testnet</a></li>
<li>v1.1 (vesting schedue): 0xA2bEe26Ac82240144038548727755EfDF8a68811`` <a href="https://testnet.bscscan.com/address/0xA2bEe26Ac82240144038548727755EfDF8a68811">bsc testnet</a></li>
</ul>
</li>
<li>Vesting Schedule:
<ul>
<li>v1.1: <code>0xDF8bCCDB0E9609d7C358CADee6c88d8B6057d1d5</code> <a href="https://testnet.bscscan.com/address/0xDF8bCCDB0E9609d7C358CADee6c88d8B6057d1d5">bsc testnet</a></li>
</ul>
</li>
</ul>
<h3 id="using-croscchain-factories"><a class="header" href="#using-croscchain-factories">Using Croscchain Factories</a></h3>
<ul>
<li>Clone <code>IGO</code> and <code>LzVestingHost</code> on Fantom (host chain) and make a call to Sepolia to <code>ClaimFactory</code>: https://testnet.ftmscan.com/tx/0x076e4a432f0dbe44c914c1b81d38386eebdd9f36da19fced40a8543b75e6cfe0 <strong>1_287_000</strong> gas used over 1_502_000</li>
<li>Clone <code>LzClaimRefundTargetChain</code> on Sepolia (target chain) through LayerZero call - <code>event ClaimCloned(...)</code> emitted: https://sepolia.etherscan.io/tx/0xa40237a8ae52555fc0a67a515da6084035ece08403f36f9e5e0fff9994c87bc8#eventlog <strong>440_000</strong> gas used over 1_560_000</li>
<li>Save <code>LzClaimRefundTargetChain</code> on Fantom from a call to Sepolia:
<ul>
<li>Sepolia: https://sepolia.etherscan.io/tx/0x6f482a475a9648076cbed955824cc88b52007a2b2e685047b2fd988940f05f54 <strong>251_000</strong> gas used over 388_000</li>
<li>Fantom callback receipt: https://testnet.ftmscan.com/tx/0xba50af9259aa4dc432e95f363a983e4ce45b31d761b8d6c888cc69d09a494ea6#eventlog <strong>282_100</strong> gas used over 619_000</li>
</ul>
</li>
</ul>
<h2 id="git-release-flow"><a class="header" href="#git-release-flow">Git Release Flow</a></h2>
<p><code>beta-*</code> is forked off from <code>dev</code> and merged into <code>main</code> once vetted, then <code>dev</code> must rebased from <code>main</code>.</p>
<p>The same workflow will be applied to <code>rc-*</code></p>
<ul>
<li><code>beta-*</code> branches contain fixes found during frontend/backend integrations, updated ABIs &amp; new testnet addresses</li>
<li><code>rc-*</code> branches contain audit fixes, audit report and mainnet addresses</li>
<li><code>main</code> branch freeze latest <code>beta-*</code> and <code>rc-*</code></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents"><a class="header" href="#contents">Contents</a></h1>
<ul>
<li><a href="src/factory/IGOFactory.sol/contract.IGOFactory.html">IGOFactory</a></li>
<li><a href="src/factory/IIGOFactory.sol/interface.IIGOFactory.html">IIGOFactory</a></li>
<li><a href="src/factory/IIGOFactoryInternal.sol/interface.IIGOFactoryInternal.html">IIGOFactoryInternal</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="igofactory"><a class="header" href="#igofactory">IGOFactory</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/factory/IGOFactory.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/factory/IGOFactory.sol//src/factory/IIGOFactory.sol/interface.IIGOFactory.html">IIGOFactory</a>, <a href="src/factory/IGOFactory.sol//src/factory/IIGOFactoryInternal.sol/interface.IIGOFactoryInternal.html">IIGOFactoryInternal</a>, AccessControlEnumerable, ReentrancyGuard, NonblockingLzApp</p>
<p>Deploy {IGO} and {IGOVesting} in single transaction through {createIGO}. Crosschain vesting and
refund compatible with {createCrosschainIGO} - crosschain vesting is called
{LzVestingHostChain}**.</p>
<p>*Use LayerZero for crosschain deployment:</p>
<ul>
<li>{IGOFactory} deploys {IGO} and {LzVestingHostChain} on host chain through {_createIGOWithVesting},</li>
<li>{IGOFactory} makes a request to target chain (ClaimFactory) through {createCrosschainIGO._lzSend}
to clone a new instance of {LzClaimRefundTargetChain},</li>
<li>{ClaimFactory.saveCrosschainClaimInHostFactory} must be <strong>manually</strong> called on target chain to
save new {LzClaimRefundTargetChain} in here (IGOFactory) and end configuration
({LzVestingHostChain} ownership to {IGO} and configure trusted remote from {LzVestingHostChain}
-host chain- to {LzClaimRefundTargetChain}).*</li>
</ul>
<h2 id="state-variables"><a class="header" href="#state-variables">State Variables</a></h2>
<h3 id="maxloop"><a class="header" href="#maxloop">maxLoop</a></h3>
<pre><code class="language-solidity">uint256 public override maxLoop = 100;
</code></pre>
<h3 id="mingas"><a class="header" href="#mingas">minGas</a></h3>
<pre><code class="language-solidity">uint256 public override minGas = 350_000;
</code></pre>
<h3 id="_igodetails"><a class="header" href="#_igodetails">_igoDetails</a></h3>
<pre><code class="language-solidity">IGODetail[] internal _igoDetails;
</code></pre>
<h3 id="_igonames"><a class="header" href="#_igonames">_igoNames</a></h3>
<pre><code class="language-solidity">mapping(string =&gt; address) internal _igoNames;
</code></pre>
<h3 id="crosschainclaimcontract"><a class="header" href="#crosschainclaimcontract">crosschainClaimContract</a></h3>
<p>Save {LzClaimRefundTargetChain} address linked to an {IGO} by its name.</p>
<p><em>Only a single claim contract per {IGO}.</em></p>
<pre><code class="language-solidity">mapping(string =&gt; address) public override crosschainClaimContract;
</code></pre>
<h3 id="defaultvesting"><a class="header" href="#defaultvesting">defaultVesting</a></h3>
<pre><code class="language-solidity">address public override defaultVesting;
</code></pre>
<h3 id="defaultcrosschainvesting"><a class="header" href="#defaultcrosschainvesting">defaultCrosschainVesting</a></h3>
<pre><code class="language-solidity">address public override defaultCrosschainVesting;
</code></pre>
<h3 id="defaultigo"><a class="header" href="#defaultigo">defaultIGO</a></h3>
<pre><code class="language-solidity">address public override defaultIGO;
</code></pre>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="constructor"><a class="header" href="#constructor">constructor</a></h3>
<pre><code class="language-solidity">constructor(address _endpoint) NonblockingLzApp(_endpoint);
</code></pre>
<h3 id="createigo"><a class="header" href="#createigo">createIGO</a></h3>
<p>Clone (minimal proxy - gas saving) and configure an {IGO} with its {IGOVesting} in a single
transaction.</p>
<p><em><code>setUp</code> must be <code>memory</code> type as it is updated in {_createIGOWithVesting}.</em></p>
<pre><code class="language-solidity">function createIGO(
    string calldata igoName,
    IGOStorage.SetUp memory setUp,
    string[] calldata phaseIds,
    ISharedInternal.Phase[] calldata phases,
    IIGOVesting.ContractSetup calldata contractSetup,
    IIGOVesting.VestingSetup calldata vestingSetup
) external override nonReentrant onlyRole(DEFAULT_ADMIN_ROLE) returns (address igo, address vesting);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>igoName</code></td><td><code>string</code></td><td>Name of the IGO to create and configure.</td></tr>
<tr><td><code>setUp</code></td><td><code>IGOStorage.SetUp</code></td><td>Struct to initialize {IGO} contract.</td></tr>
<tr><td><code>phaseIds</code></td><td><code>string[]</code></td><td>Default phases/phase name to create at IGO initialization.</td></tr>
<tr><td><code>phases</code></td><td><code>ISharedInternal.Phase[]</code></td><td>Default phases/phase object to create at IGO initialization.</td></tr>
<tr><td><code>contractSetup</code></td><td><code>IIGOVesting.ContractSetup</code></td><td>Struct to initiliaze first part of {IGOVesting} - developed by Decubate.</td></tr>
<tr><td><code>vestingSetup</code></td><td><code>IIGOVesting.VestingSetup</code></td><td>Struct to initiliaze second part of {IGOVesting} - developed by Decubate.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>igo</code></td><td><code>address</code></td><td>New cloned and configured {IGO} contract.</td></tr>
<tr><td><code>vesting</code></td><td><code>address</code></td><td>New cloned and configured {IGOVetsing} contract.</td></tr>
</tbody></table>
</div>
<h3 id="createcrosschainigo"><a class="header" href="#createcrosschainigo">createCrosschainIGO</a></h3>
<p>Clone (minimal proxy - gas saving) and configure an {IGO} with its crosschain
{LzVestingHostChain} in a single transaction.</p>
<p><em><code>setUp</code> must be <code>memory</code> type as it is updated in {_createIGOWithVesting}.</em></p>
<pre><code class="language-solidity">function createCrosschainIGO(
    CrosschainDetail calldata crosschain,
    string calldata igoName,
    IGOStorage.SetUp memory setUp,
    string[] calldata phaseIds,
    ISharedInternal.Phase[] calldata phases,
    IIGOVesting.ContractSetup calldata contractSetup,
    IIGOVesting.VestingSetup calldata vestingSetup
) external payable override nonReentrant onlyRole(DEFAULT_ADMIN_ROLE) returns (address igo, address vesting);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>crosschain</code></td><td><code>CrosschainDetail</code></td><td>Struct containing required crosschain details for crosschain deployment and configuration.</td></tr>
<tr><td><code>igoName</code></td><td><code>string</code></td><td>Name of the IGO to create and configure.</td></tr>
<tr><td><code>setUp</code></td><td><code>IGOStorage.SetUp</code></td><td>Struct to initialize {IGO} contract.</td></tr>
<tr><td><code>phaseIds</code></td><td><code>string[]</code></td><td>Default phases/phase name to create at IGO initialization.</td></tr>
<tr><td><code>phases</code></td><td><code>ISharedInternal.Phase[]</code></td><td>Default phases/phase object to create at IGO initialization.</td></tr>
<tr><td><code>contractSetup</code></td><td><code>IIGOVesting.ContractSetup</code></td><td>Struct to initiliaze first part of {LzVestingHostChain} - add crosschain compatibility on top of {IGOVesting} developed by Decubate.</td></tr>
<tr><td><code>vestingSetup</code></td><td><code>IIGOVesting.VestingSetup</code></td><td>Struct to initiliaze second part of {LzVestingHostChain} - add crosschain compatibility on top of {IGOVesting} developed by Decubate.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>igo</code></td><td><code>address</code></td><td>New cloned and configured {IGO} contract.</td></tr>
<tr><td><code>vesting</code></td><td><code>address</code></td><td>New cloned and configured {LzVestingHostChain} contract.</td></tr>
</tbody></table>
</div>
<h3 id="updatedefaultcrosschainvesting"><a class="header" href="#updatedefaultcrosschainvesting">updateDefaultCrosschainVesting</a></h3>
<p>Update default {LzVestingHostChain} to use in {createCrosschainIGO}.</p>
<p>*If not set set {createCrosschainIGO} will fail with:</p>
<ul>
<li>{IGOFactory_DefaultCrosschainVesting_NotSet} error.*</li>
</ul>
<pre><code class="language-solidity">function updateDefaultCrosschainVesting(address newDefaultCrosschainVesting)
    external
    override
    onlyRole(DEFAULT_ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>newDefaultCrosschainVesting</code></td><td><code>address</code></td><td>Default {LzVestingHostChain} to use for next {createCrosschainIGO} call.</td></tr>
</tbody></table>
</div>
<h3 id="updatedefaultigoandvesting"><a class="header" href="#updatedefaultigoandvesting">updateDefaultIGOAndVesting</a></h3>
<p>Update default {IGO} and {IGOVesting} to use in {createIGO}.</p>
<p>*If not one of these or both not set, {createIGO} will fail with either:</p>
<ul>
<li>{IGOFactory_DefaultIGO_NotSet} error;</li>
<li>{IGOFactory_DefaultVesting_NotSet} error.*</li>
</ul>
<pre><code class="language-solidity">function updateDefaultIGOAndVesting(address newDefaultIGO, address newDefaultVesting)
    external
    override
    onlyRole(DEFAULT_ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>newDefaultIGO</code></td><td><code>address</code></td><td>Default {IGO} to use for next {createIGO} call.</td></tr>
<tr><td><code>newDefaultVesting</code></td><td><code>address</code></td><td>Default {IGOVesting} to use for next {createIGO} call.</td></tr>
</tbody></table>
</div>
<h3 id="setmaxloop"><a class="header" href="#setmaxloop">setMaxLoop</a></h3>
<p>Set the maxium amount of loops to be used in {getIgosDetails}.</p>
<pre><code class="language-solidity">function setMaxLoop(uint256 newMaxLoop) external override onlyRole(DEFAULT_ADMIN_ROLE);
</code></pre>
<h3 id="setmingas"><a class="header" href="#setmingas">setMinGas</a></h3>
<p>Set the maxium amount of {gasleft()} in {createCrosschainIGO}.</p>
<pre><code class="language-solidity">function setMinGas(uint256 newMinGas) external override onlyRole(DEFAULT_ADMIN_ROLE);
</code></pre>
<h3 id="getigosdetails"><a class="header" href="#getigosdetails">getIgosDetails</a></h3>
<p>Get details of many {IGO} by batch to index items on frontend - asked by Decubate.</p>
<pre><code class="language-solidity">function getIgosDetails(uint256 from, uint256 to)
    external
    view
    override
    returns (IGODetail[] memory igos, uint256 lastEvaludatedIndex, uint256 totalItems);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>from</code></td><td><code>uint256</code></td><td>Index to start reading from {_igoDetails}.</td></tr>
<tr><td><code>to</code></td><td><code>uint256</code></td><td>Index to finish reading from {_igoDetails}.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>igos</code></td><td><code>IGODetail[]</code></td><td>Details of {IGO} requested, from <code>from</code> to <code>to</code>.</td></tr>
<tr><td><code>lastEvaludatedIndex</code></td><td><code>uint256</code></td><td>Last index evaluated within the loop - should be <code>from</code>.</td></tr>
<tr><td><code>totalItems</code></td><td><code>uint256</code></td><td>Total amount of {IGODetail} fetched.</td></tr>
</tbody></table>
</div>
<h3 id="_createigowithvesting"><a class="header" href="#_createigowithvesting">_createIGOWithVesting</a></h3>
<p><em><code>setUp</code> must be <code>memory</code> type as it is updated here. Other parameters similar to {createIGO}
and {createCrosschainIGO}.</em></p>
<pre><code class="language-solidity">function _createIGOWithVesting(
    bool isCrosschain,
    string calldata igoName,
    IGOStorage.SetUp memory setUp,
    string[] calldata phaseIds,
    ISharedInternal.Phase[] calldata phases,
    IIGOVesting.ContractSetup calldata contractSetup,
    IIGOVesting.VestingSetup calldata vestingSetup
) internal returns (address igo, address vesting);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>isCrosschain</code></td><td><code>bool</code></td><td>Whether to clone a {LzVestingHostChain} or {IGOVesting} instance.</td></tr>
<tr><td><code>igoName</code></td><td><code>string</code></td><td></td></tr>
<tr><td><code>setUp</code></td><td><code>IGOStorage.SetUp</code></td><td></td></tr>
<tr><td><code>phaseIds</code></td><td><code>string[]</code></td><td></td></tr>
<tr><td><code>phases</code></td><td><code>ISharedInternal.Phase[]</code></td><td></td></tr>
<tr><td><code>contractSetup</code></td><td><code>IIGOVesting.ContractSetup</code></td><td></td></tr>
<tr><td><code>vestingSetup</code></td><td><code>IIGOVesting.VestingSetup</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="_nonblockinglzreceive"><a class="header" href="#_nonblockinglzreceive">_nonblockingLzReceive</a></h3>
<p><em>LayerZero base function override to make actions on crosschain message receipt.</em></p>
<pre><code class="language-solidity">function _nonblockingLzReceive(uint16, bytes memory, uint64, bytes memory _payload) internal override;
</code></pre>
<h3 id="_updatestorageonclaimfactorycallback"><a class="header" href="#_updatestorageonclaimfactorycallback">_updateStorageOnClaimFactoryCallback</a></h3>
<p><em>Update {LzVestingHostChain} ownership to {IGO} and configure trusted remote from
{LzVestingHostChain} to {LzClaimRefundTargetChain} with the riht host chain id (LayerZero
chain id specific).</em></p>
<pre><code class="language-solidity">function _updateStorageOnClaimFactoryCallback(bytes memory data) internal;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iigofactory"><a class="header" href="#iigofactory">IIGOFactory</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/factory/IIGOFactory.sol">Git Source</a></p>
<p>Defines external and public functions for {IGOFactory}.</p>
<h2 id="functions-1"><a class="header" href="#functions-1">Functions</a></h2>
<h3 id="createigo-1"><a class="header" href="#createigo-1">createIGO</a></h3>
<p>Clone (minimal proxy - gas saving) and configure an {IGO} with its {IGOVesting} in a single
transaction.</p>
<p><em><code>setUp</code> must be <code>memory</code> type as it is updated in {_createIGOWithVesting}.</em></p>
<pre><code class="language-solidity">function createIGO(
    string calldata igoName,
    IGOStorage.SetUp memory setUp,
    string[] calldata phaseIds,
    ISharedInternal.Phase[] calldata phases,
    IIGOVesting.ContractSetup calldata contractSetup,
    IIGOVesting.VestingSetup calldata vestingSetup
) external returns (address igo, address vesting);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>igoName</code></td><td><code>string</code></td><td>Name of the IGO to create and configure.</td></tr>
<tr><td><code>setUp</code></td><td><code>IGOStorage.SetUp</code></td><td>Struct to initialize {IGO} contract.</td></tr>
<tr><td><code>phaseIds</code></td><td><code>string[]</code></td><td>Default phases/phase name to create at IGO initialization.</td></tr>
<tr><td><code>phases</code></td><td><code>ISharedInternal.Phase[]</code></td><td>Default phases/phase object to create at IGO initialization.</td></tr>
<tr><td><code>contractSetup</code></td><td><code>IIGOVesting.ContractSetup</code></td><td>Struct to initiliaze first part of {IGOVesting} - developed by Decubate.</td></tr>
<tr><td><code>vestingSetup</code></td><td><code>IIGOVesting.VestingSetup</code></td><td>Struct to initiliaze second part of {IGOVesting} - developed by Decubate.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>igo</code></td><td><code>address</code></td><td>New cloned and configured {IGO} contract.</td></tr>
<tr><td><code>vesting</code></td><td><code>address</code></td><td>New cloned and configured {IGOVetsing} contract.</td></tr>
</tbody></table>
</div>
<h3 id="createcrosschainigo-1"><a class="header" href="#createcrosschainigo-1">createCrosschainIGO</a></h3>
<p>Clone (minimal proxy - gas saving) and configure an {IGO} with its crosschain
{LzVestingHostChain} in a single transaction.</p>
<p><em><code>setUp</code> must be <code>memory</code> type as it is updated in {_createIGOWithVesting}.</em></p>
<pre><code class="language-solidity">function createCrosschainIGO(
    IIGOFactoryInternal.CrosschainDetail calldata crosschain,
    string calldata igoName,
    IGOStorage.SetUp memory setUp,
    string[] calldata phaseIds,
    ISharedInternal.Phase[] calldata phases,
    IIGOVesting.ContractSetup calldata contractSetup,
    IIGOVesting.VestingSetup calldata vestingSetup
) external payable returns (address igo, address vesting);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>crosschain</code></td><td><code>IIGOFactoryInternal.CrosschainDetail</code></td><td>Struct containing required crosschain details for crosschain deployment and configuration.</td></tr>
<tr><td><code>igoName</code></td><td><code>string</code></td><td>Name of the IGO to create and configure.</td></tr>
<tr><td><code>setUp</code></td><td><code>IGOStorage.SetUp</code></td><td>Struct to initialize {IGO} contract.</td></tr>
<tr><td><code>phaseIds</code></td><td><code>string[]</code></td><td>Default phases/phase name to create at IGO initialization.</td></tr>
<tr><td><code>phases</code></td><td><code>ISharedInternal.Phase[]</code></td><td>Default phases/phase object to create at IGO initialization.</td></tr>
<tr><td><code>contractSetup</code></td><td><code>IIGOVesting.ContractSetup</code></td><td>Struct to initiliaze first part of {LzVestingHostChain} - add crosschain compatibility on top of {IGOVesting} developed by Decubate.</td></tr>
<tr><td><code>vestingSetup</code></td><td><code>IIGOVesting.VestingSetup</code></td><td>Struct to initiliaze second part of {LzVestingHostChain} - add crosschain compatibility on top of {IGOVesting} developed by Decubate.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>igo</code></td><td><code>address</code></td><td>New cloned and configured {IGO} contract.</td></tr>
<tr><td><code>vesting</code></td><td><code>address</code></td><td>New cloned and configured {LzVestingHostChain} contract.</td></tr>
</tbody></table>
</div>
<h3 id="updatedefaultcrosschainvesting-1"><a class="header" href="#updatedefaultcrosschainvesting-1">updateDefaultCrosschainVesting</a></h3>
<p>Update default {LzVestingHostChain} to use in {createCrosschainIGO}.</p>
<p>*If not set set {createCrosschainIGO} will fail with:</p>
<ul>
<li>{IGOFactory_DefaultCrosschainVesting_NotSet} error.*</li>
</ul>
<pre><code class="language-solidity">function updateDefaultCrosschainVesting(address newDefaultCrosschainVesting) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>newDefaultCrosschainVesting</code></td><td><code>address</code></td><td>Default {LzVestingHostChain} to use for next {createCrosschainIGO} call.</td></tr>
</tbody></table>
</div>
<h3 id="updatedefaultigoandvesting-1"><a class="header" href="#updatedefaultigoandvesting-1">updateDefaultIGOAndVesting</a></h3>
<p>Update default {IGO} and {IGOVesting} to use in {createIGO}.</p>
<p>*If not one of these or both not set, {createIGO} will fail with either:</p>
<ul>
<li>{IGOFactory_DefaultIGO_NotSet} error;</li>
<li>{IGOFactory_DefaultVesting_NotSet} error.*</li>
</ul>
<p><em><code>defaultIGO</code> is used by both {createIGO} and {createCrosschainIGO}.</em></p>
<pre><code class="language-solidity">function updateDefaultIGOAndVesting(address newDefaultIGO, address newDefaultVesting) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>newDefaultIGO</code></td><td><code>address</code></td><td>Default {IGO} to use for next {createIGO} call.</td></tr>
<tr><td><code>newDefaultVesting</code></td><td><code>address</code></td><td>Default {IGOVesting} to use for next {createIGO} call.</td></tr>
</tbody></table>
</div>
<h3 id="setmaxloop-1"><a class="header" href="#setmaxloop-1">setMaxLoop</a></h3>
<p>Set the maxium amount of loops to be used in {getIgosDetails}.</p>
<pre><code class="language-solidity">function setMaxLoop(uint256 newMaxLoop) external;
</code></pre>
<h3 id="setmingas-1"><a class="header" href="#setmingas-1">setMinGas</a></h3>
<p>Set the maxium amount of {gasleft()} in {createCrosschainIGO}.</p>
<pre><code class="language-solidity">function setMinGas(uint256 newMinGas) external;
</code></pre>
<h3 id="getigosdetails-1"><a class="header" href="#getigosdetails-1">getIgosDetails</a></h3>
<p>Get details of many {IGO} by batch to index items on frontend - asked by Decubate.</p>
<pre><code class="language-solidity">function getIgosDetails(uint256 from, uint256 to)
    external
    view
    returns (IIGOFactoryInternal.IGODetail[] memory igos, uint256 lastEvaludatedIndex, uint256 totalItems);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>from</code></td><td><code>uint256</code></td><td>Index to start reading from {_igoDetails}.</td></tr>
<tr><td><code>to</code></td><td><code>uint256</code></td><td>Index to finish reading from {_igoDetails}.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>igos</code></td><td><code>IIGOFactoryInternal.IGODetail[]</code></td><td>Details of {IGO} requested, from <code>from</code> to <code>to</code>.</td></tr>
<tr><td><code>lastEvaludatedIndex</code></td><td><code>uint256</code></td><td>Last index evaluated within the loop - should be <code>from</code>.</td></tr>
<tr><td><code>totalItems</code></td><td><code>uint256</code></td><td>Total amount of {IGODetail} fetched.</td></tr>
</tbody></table>
</div>
<h3 id="crosschainclaimcontract-1"><a class="header" href="#crosschainclaimcontract-1">crosschainClaimContract</a></h3>
<p>Save {LzClaimRefundTargetChain} address linked to an {IGO} by its name.</p>
<p><em>Only a single claim contract per {IGO}.</em></p>
<pre><code class="language-solidity">function crosschainClaimContract(string memory) external returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Claim address deployed on host chain linked to given {IGO} name.</td></tr>
</tbody></table>
</div>
<h3 id="defaultvesting-1"><a class="header" href="#defaultvesting-1">defaultVesting</a></h3>
<pre><code class="language-solidity">function defaultVesting() external returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Default {IGOVesting}.</td></tr>
</tbody></table>
</div>
<h3 id="defaultcrosschainvesting-1"><a class="header" href="#defaultcrosschainvesting-1">defaultCrosschainVesting</a></h3>
<pre><code class="language-solidity">function defaultCrosschainVesting() external returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Default {LzVestingHostChain}.</td></tr>
</tbody></table>
</div>
<h3 id="defaultigo-1"><a class="header" href="#defaultigo-1">defaultIGO</a></h3>
<pre><code class="language-solidity">function defaultIGO() external returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>return Default {IGO}.</td></tr>
</tbody></table>
</div>
<h3 id="maxloop-1"><a class="header" href="#maxloop-1">maxLoop</a></h3>
<pre><code class="language-solidity">function maxLoop() external returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Maximum amount of loops to use per {getIgosDetails} call.</td></tr>
</tbody></table>
</div>
<h3 id="mingas-1"><a class="header" href="#mingas-1">minGas</a></h3>
<pre><code class="language-solidity">function minGas() external returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Minimum amount of {gasleft()} in {createCrosschainIGO}.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="iigofactoryinternal"><a class="header" href="#iigofactoryinternal">IIGOFactoryInternal</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/factory/IIGOFactoryInternal.sol">Git Source</a></p>
<p>Internal interface of {IGOFactory} which defines strcutures, events and errors.</p>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<h3 id="defaultvestingupdated"><a class="header" href="#defaultvestingupdated">DefaultVestingUpdated</a></h3>
<p>Emitted only in {updateDefaultIGOAndVesting}.</p>
<pre><code class="language-solidity">event DefaultVestingUpdated(
    address indexed defaultIGO, address defaultVesting, address indexed newDefaultIGO, address indexed newDefaultVesting
);
</code></pre>
<h3 id="defaultcrosschainvestingupdated"><a class="header" href="#defaultcrosschainvestingupdated">DefaultCrosschainVestingUpdated</a></h3>
<p>Emitted only in {updateDefaultCrosschainVesting}.</p>
<pre><code class="language-solidity">event DefaultCrosschainVestingUpdated(
    address indexed defaultCrosschainVesting, address indexed newDefaultCrosschainVesting
);
</code></pre>
<h3 id="igocreated"><a class="header" href="#igocreated">IGOCreated</a></h3>
<p>Emitted only in {createIGO}.</p>
<pre><code class="language-solidity">event IGOCreated(string indexed igoName, address indexed igo, address indexed vesting);
</code></pre>
<h3 id="crosschainigocreated"><a class="header" href="#crosschainigocreated">CrosschainIGOCreated</a></h3>
<p>Emitted only in {createCrosschainIGO}.</p>
<pre><code class="language-solidity">event CrosschainIGOCreated(string indexed igoName, address indexed igo, address indexed vesting);
</code></pre>
<h3 id="mingasupdated"><a class="header" href="#mingasupdated">MinGasUpdated</a></h3>
<p>Emitted only in {updateMinGas}.</p>
<pre><code class="language-solidity">event MinGasUpdated(uint256 oldMinGas, uint256 newMinGas);
</code></pre>
<h2 id="errors"><a class="header" href="#errors">Errors</a></h2>
<h3 id="igofactory_defaultcrosschainvesting_notset"><a class="header" href="#igofactory_defaultcrosschainvesting_notset">IGOFactory_DefaultCrosschainVesting_NotSet</a></h3>
<p>Thrown when {defaultCrosschainVesting} is not set.</p>
<pre><code class="language-solidity">error IGOFactory_DefaultCrosschainVesting_NotSet();
</code></pre>
<h3 id="igofactory_defaultcrosschainvesting_zeroaddr"><a class="header" href="#igofactory_defaultcrosschainvesting_zeroaddr">IGOFactory_DefaultCrosschainVesting_ZeroAddr</a></h3>
<p>Thrown when trying to set {defaultCrosschainVesting} as <code>address(0)</code> in {updateDefaultCrosschainVesting}.</p>
<pre><code class="language-solidity">error IGOFactory_DefaultCrosschainVesting_ZeroAddr();
</code></pre>
<h3 id="igofactory_defaultigo_notset"><a class="header" href="#igofactory_defaultigo_notset">IGOFactory_DefaultIGO_NotSet</a></h3>
<p>Thrown when {defaultIGO} is not set.</p>
<pre><code class="language-solidity">error IGOFactory_DefaultIGO_NotSet();
</code></pre>
<h3 id="igofactory_defaultigo_zeroaddr"><a class="header" href="#igofactory_defaultigo_zeroaddr">IGOFactory_DefaultIGO_ZeroAddr</a></h3>
<p>Thrown when trying to set {defaultIGO} as <code>address(0)</code> in {updateDefaultIGOAndVesting}.</p>
<pre><code class="language-solidity">error IGOFactory_DefaultIGO_ZeroAddr();
</code></pre>
<h3 id="igofactory_defaultvesting_notset"><a class="header" href="#igofactory_defaultvesting_notset">IGOFactory_DefaultVesting_NotSet</a></h3>
<p>Thrown when {defaultVesting} is not set.</p>
<pre><code class="language-solidity">error IGOFactory_DefaultVesting_NotSet();
</code></pre>
<h3 id="igofactory_defaultvesting_zeroaddr"><a class="header" href="#igofactory_defaultvesting_zeroaddr">IGOFactory_DefaultVesting_ZeroAddr</a></h3>
<p>Thrown when trying to set {defaultVesting} as <code>address(0)</code> in
{updateDefaultIGOAndVesting}.</p>
<pre><code class="language-solidity">error IGOFactory_DefaultVesting_ZeroAddr();
</code></pre>
<h3 id="igofactory_igonameexists"><a class="header" href="#igofactory_igonameexists">IGOFactory_IGONameExists</a></h3>
<p>Thrown when an IGO with <code>name</code> has already been created.</p>
<pre><code class="language-solidity">error IGOFactory_IGONameExists(string name);
</code></pre>
<h3 id="igofactory_indexesreversed"><a class="header" href="#igofactory_indexesreversed">IGOFactory_IndexesReversed</a></h3>
<p>Thrown when <code>from</code> is &gt; <code>to</code> in {getIgosDetails}.</p>
<pre><code class="language-solidity">error IGOFactory_IndexesReversed();
</code></pre>
<h3 id="igofactory_insufficientgasleft"><a class="header" href="#igofactory_insufficientgasleft">IGOFactory_InsufficientGasLeft</a></h3>
<p>Thrown when <code>required</code> amount of gas is greater than <code>left</code> in {createCrosschainIGO}.</p>
<pre><code class="language-solidity">error IGOFactory_InsufficientGasLeft(uint256 required, uint256 left);
</code></pre>
<h3 id="igofactory_invalidselector"><a class="header" href="#igofactory_invalidselector">IGOFactory_InvalidSelector</a></h3>
<p>Thrown when no registered function selector is matched in <code>_nonblockingLzReceive</code>.</p>
<pre><code class="language-solidity">error IGOFactory_InvalidSelector(bytes4 selector);
</code></pre>
<h3 id="igofactory_samechainshostistarget"><a class="header" href="#igofactory_samechainshostistarget">IGOFactory_SameChainsHostIsTarget</a></h3>
<p>Thrown when {createCrosschainIGO} is called with <code>crosschain.hostChain</code> == <code>crosschain.targetChain</code>.</p>
<pre><code class="language-solidity">error IGOFactory_SameChainsHostIsTarget();
</code></pre>
<h2 id="structs"><a class="header" href="#structs">Structs</a></h2>
<h3 id="igodetail"><a class="header" href="#igodetail">IGODetail</a></h3>
<p>Struct representing an IGO cloned and created by {_createIGOWithVesting}vfunction.</p>
<pre><code class="language-solidity">struct IGODetail {
    string name;
    address igo;
    address vesting;
    IGOStorage.SetUp setUp;
    bool isCrosschain;
}
</code></pre>
<h3 id="crosschaindetail"><a class="header" href="#crosschaindetail">CrosschainDetail</a></h3>
<p>Struct representing data to clone {LzClaimRefundTargetChain} on the right target chain.</p>
<pre><code class="language-solidity">struct CrosschainDetail {
    address lzDstEndpoint;
    uint16 hostChain;
    uint16 targetChain;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-1"><a class="header" href="#contents-1">Contents</a></h1>
<ul>
<li><a href="src/lzApp//src/lzApp/interfaces">interfaces</a></li>
<li><a href="src/lzApp/ClaimFactory.sol/contract.ClaimFactory.html">ClaimFactory</a></li>
<li><a href="src/lzApp/LzClaimRefundTargetChain.sol/contract.LzClaimRefundTargetChain.html">LzClaimRefundTargetChain</a></li>
<li><a href="src/lzApp/LzStorage.sol/library.LzStorage.html">LzStorage</a></li>
<li><a href="src/lzApp/LzVestingHostChain.sol/contract.LzVestingHostChain.html">LzVestingHostChain</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-2"><a class="header" href="#contents-2">Contents</a></h1>
<ul>
<li><a href="src/lzApp/interfaces//src/lzApp/interfaces/internal">internal</a></li>
<li><a href="src/lzApp/interfaces/IClaimFactory.sol/interface.IClaimFactory.html">IClaimFactory</a></li>
<li><a href="src/lzApp/interfaces/IHost.sol/interface.IHost.html">IHost</a></li>
<li><a href="src/lzApp/interfaces/ITarget.sol/interface.ITarget.html">ITarget</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-3"><a class="header" href="#contents-3">Contents</a></h1>
<ul>
<li><a href="src/lzApp/interfaces/internal/IClaimFactoryInternal.sol/interface.IClaimFactoryInternal.html">IClaimFactoryInternal</a></li>
<li><a href="src/lzApp/interfaces/internal/ICrosschainErrorsInternal.sol/interface.ICrosschainErrorsInternal.html">ICrosschainErrorsInternal</a></li>
<li><a href="src/lzApp/interfaces/internal/IHostInternal.sol/interface.IHostInternal.html">IHostInternal</a></li>
<li><a href="src/lzApp/interfaces/internal/ITargetInternal.sol/interface.ITargetInternal.html">ITargetInternal</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iclaimfactoryinternal"><a class="header" href="#iclaimfactoryinternal">IClaimFactoryInternal</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/lzApp/interfaces/internal/IClaimFactoryInternal.sol">Git Source</a></p>
<p>Internal interface of {ClaimFactory} which defines strcutures, events and errors.</p>
<h2 id="events-1"><a class="header" href="#events-1">Events</a></h2>
<h3 id="claimcloned"><a class="header" href="#claimcloned">ClaimCloned</a></h3>
<p>Emitted only in {_cloneDefaultClaim}.</p>
<pre><code class="language-solidity">event ClaimCloned(string indexed fromIgoName, address indexed claimRefund, address indexed vesting);
</code></pre>
<h3 id="defaultclaimupdated"><a class="header" href="#defaultclaimupdated">DefaultClaimUpdated</a></h3>
<p>Emitted only in {updateDefaultClaim}.</p>
<pre><code class="language-solidity">event DefaultClaimUpdated(address indexed oldDefaultClaim, address indexed newDefaultClaim);
</code></pre>
<h3 id="mingasupdated-1"><a class="header" href="#mingasupdated-1">MinGasUpdated</a></h3>
<p>Emitted only in {setMinGas}.</p>
<pre><code class="language-solidity">event MinGasUpdated(uint256 oldMinGas, uint256 newMinGas);
</code></pre>
<h2 id="errors-1"><a class="header" href="#errors-1">Errors</a></h2>
<h3 id="claimfactory_defaultclaim_notset"><a class="header" href="#claimfactory_defaultclaim_notset">ClaimFactory_DefaultClaim_NotSet</a></h3>
<p>Thrown when trying to clone {defaultClaimRefund} whereas it has not been set beforehand.</p>
<pre><code class="language-solidity">error ClaimFactory_DefaultClaim_NotSet();
</code></pre>
<h3 id="claimfactory_defaultclaim_zeroaddr"><a class="header" href="#claimfactory_defaultclaim_zeroaddr">ClaimFactory_DefaultClaim_ZeroAddr</a></h3>
<p>Thrown when trying to update {defaultClaimRefund} to <code>address(0)</code>.</p>
<pre><code class="language-solidity">error ClaimFactory_DefaultClaim_ZeroAddr();
</code></pre>
<h3 id="claimfactory_insufficientgasleft"><a class="header" href="#claimfactory_insufficientgasleft">ClaimFactory_InsufficientGasLeft</a></h3>
<p>Thrown when trying not enough gas left to call <code>saveCrosschainClaimInHostFactory.lzSend</code>.</p>
<pre><code class="language-solidity">error ClaimFactory_InsufficientGasLeft(uint256 required, uint256 available);
</code></pre>
<h3 id="claimfactory_invalidselector"><a class="header" href="#claimfactory_invalidselector">ClaimFactory_InvalidSelector</a></h3>
<p>Thrown when no registered function selector is matched in {_nonblockingLzReceive}.</p>
<pre><code class="language-solidity">error ClaimFactory_InvalidSelector();
</code></pre>
<h2 id="structs-1"><a class="header" href="#structs-1">Structs</a></h2>
<h3 id="igolinkeddetails"><a class="header" href="#igolinkeddetails">IGOLinkedDetails</a></h3>
<p>Struct representing details of an {IGO} linked to a {LzClaimRefundTargetChain}.</p>
<pre><code class="language-solidity">struct IGOLinkedDetails {
    string name;
    address vesting;
    uint16 hostChain;
    uint16 targetChain;
    address claimRefund;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="icrosschainerrorsinternal"><a class="header" href="#icrosschainerrorsinternal">ICrosschainErrorsInternal</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/lzApp/interfaces/internal/ICrosschainErrorsInternal.sol">Git Source</a></p>
<p>Internal interface to define shared crosschain errors in {LzClaimRefundTargetChain} and
{LzVestingHostChain}.</p>
<h2 id="errors-2"><a class="header" href="#errors-2">Errors</a></h2>
<h3 id="onlylayerzero"><a class="header" href="#onlylayerzero">OnlyLayerZero</a></h3>
<p>Thrown when another address than LayerZero endpoint is trying to call a function.</p>
<pre><code class="language-solidity">error OnlyLayerZero(address sender, address layerZero);
</code></pre>
<h3 id="zeroaddrlzendpoint"><a class="header" href="#zeroaddrlzendpoint">ZeroAddrLzEndpoint</a></h3>
<p>Thrown when trying set LayerZero endpoint to <code>address(0)</code>.</p>
<pre><code class="language-solidity">error ZeroAddrLzEndpoint();
</code></pre>
<h3 id="samechains_hostistarget"><a class="header" href="#samechains_hostistarget">SameChains_HostIsTarget</a></h3>
<p>Thrown when trying to set host chain and target chain as the same chain.</p>
<pre><code class="language-solidity">error SameChains_HostIsTarget();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ihostinternal"><a class="header" href="#ihostinternal">IHostInternal</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/lzApp/interfaces/internal/IHostInternal.sol">Git Source</a></p>
<p>Internal interface of {LzVestingHostChain} which defines strcutures, events and errors.</p>
<h2 id="events-2"><a class="header" href="#events-2">Events</a></h2>
<h3 id="hostchainclaim"><a class="header" href="#hostchainclaim">HostChainClaim</a></h3>
<p>Emitted only in {_hostClaimUpdate}.</p>
<pre><code class="language-solidity">event HostChainClaim(address indexed token, uint256 indexed time);
</code></pre>
<h2 id="errors-3"><a class="header" href="#errors-3">Errors</a></h2>
<h3 id="lzvestinghostchain_invalidselector"><a class="header" href="#lzvestinghostchain_invalidselector">LzVestingHostChain_InvalidSelector</a></h3>
<p>Thrown when function selector is not matched in {_nonblockingLzReceive}.</p>
<pre><code class="language-solidity">error LzVestingHostChain_InvalidSelector();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="itargetinternal"><a class="header" href="#itargetinternal">ITargetInternal</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/lzApp/interfaces/internal/ITargetInternal.sol">Git Source</a></p>
<p>Internal interface of {LzClaimRefundTargetChain} which defines strcutures, events and errors.</p>
<h2 id="events-3"><a class="header" href="#events-3">Events</a></h2>
<h3 id="targetchainclaim"><a class="header" href="#targetchainclaim">TargetChainClaim</a></h3>
<p>Emitted only in {_releaseTokenToUser}.</p>
<pre><code class="language-solidity">event TargetChainClaim(address indexed token, address indexed receiver, uint256 indexed amount, uint256 time);
</code></pre>
<h2 id="errors-4"><a class="header" href="#errors-4">Errors</a></h2>
<h3 id="lzclaimrefundtargetchain_invalidselector"><a class="header" href="#lzclaimrefundtargetchain_invalidselector">LzClaimRefundTargetChain_InvalidSelector</a></h3>
<p>Thrown when function selector is not matched in {_nonblockingLzReceive}.</p>
<pre><code class="language-solidity">error LzClaimRefundTargetChain_InvalidSelector();
</code></pre>
<h3 id="lzclaimrefundtargetchain_novestedtokenreleased"><a class="header" href="#lzclaimrefundtargetchain_novestedtokenreleased">LzClaimRefundTargetChain_NoVestedTokenReleased</a></h3>
<p>Thrown when trying to release an amount of 0 of a given token.</p>
<pre><code class="language-solidity">error LzClaimRefundTargetChain_NoVestedTokenReleased();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iclaimfactory"><a class="header" href="#iclaimfactory">IClaimFactory</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/lzApp/interfaces/IClaimFactory.sol">Git Source</a></p>
<p>Defines external and public functions for {ClaimFactory}.</p>
<h2 id="functions-2"><a class="header" href="#functions-2">Functions</a></h2>
<h3 id="updatedefaultclaim"><a class="header" href="#updatedefaultclaim">updateDefaultClaim</a></h3>
<p>Update {defaultClaimRefund} to clone on next {_cloneDefaultClaim} call.</p>
<pre><code class="language-solidity">function updateDefaultClaim(address newDefaultClaim) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>newDefaultClaim</code></td><td><code>address</code></td><td>Address of the new default {LzClaimRefundTargetChain} contract.</td></tr>
</tbody></table>
</div>
<h3 id="setmingas-2"><a class="header" href="#setmingas-2">setMinGas</a></h3>
<p>Update {minGas} to use in {saveCrosschainClaimInHostFactory._lzSend}.</p>
<pre><code class="language-solidity">function setMinGas(uint256 newMinGas) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>newMinGas</code></td><td><code>uint256</code></td><td>Value of the new minimum amount of gas.</td></tr>
</tbody></table>
</div>
<h3 id="defaultclaimrefund"><a class="header" href="#defaultclaimrefund">defaultClaimRefund</a></h3>
<p><em>Address of the new default {LzClaimRefundTargetChain} contract to clone.</em></p>
<pre><code class="language-solidity">function defaultClaimRefund() external returns (address);
</code></pre>
<h3 id="igolinkeddetails-1"><a class="header" href="#igolinkeddetails-1">igoLinkedDetails</a></h3>
<p>Details of the {IGO} linked to the given <code>claim</code>.</p>
<pre><code class="language-solidity">function igoLinkedDetails(address claim)
    external
    returns (string memory name, address vesting, uint16 hostChain, uint16 targetChain, address claimRefund);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>name</code></td><td><code>string</code></td><td>Name of the linked {IGO}.</td></tr>
<tr><td><code>vesting</code></td><td><code>address</code></td><td>Address of the {LzVestingHostChain} contract linked to the {IGO}.</td></tr>
<tr><td><code>hostChain</code></td><td><code>uint16</code></td><td>Chain id of where the linked {IGO} and {LzVestingHostChain} are deployed, using nomenclature LayerZero.</td></tr>
<tr><td><code>targetChain</code></td><td><code>uint16</code></td><td>Current chain id where {LzClaimRefundTargetChain} is deployed, using LayerZero nomenclature.</td></tr>
<tr><td><code>claimRefund</code></td><td><code>address</code></td><td>Address of the {LzClaimRefundTargetChain} contract cloned on current chain.</td></tr>
</tbody></table>
</div>
<h3 id="lastclaimcloned"><a class="header" href="#lastclaimcloned">lastClaimCloned</a></h3>
<p>Address of the last cloned {LzClaimRefundTargetChain} contract. Useful for
{saveCrosschainClaim} call.</p>
<pre><code class="language-solidity">function lastClaimCloned() external returns (address);
</code></pre>
<h3 id="mingas-2"><a class="header" href="#mingas-2">minGas</a></h3>
<p><em>Minimum amount of gas to use in {saveCrosschainClaimInHostFactory}.</em></p>
<pre><code class="language-solidity">function minGas() external returns (uint256);
</code></pre>
<h3 id="savecrosschainclaiminhostfactory"><a class="header" href="#savecrosschainclaiminhostfactory">saveCrosschainClaimInHostFactory</a></h3>
<p>Manually save {LzClaimRefundTargetChain} linked to an {IGO} in {igoLinkedDetails}, on host
chain.</p>
<pre><code class="language-solidity">function saveCrosschainClaimInHostFactory(address claimToSave) external payable;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>claimToSave</code></td><td><code>address</code></td><td>Address of the {LzClaimRefundTargetChain} contract to save on host chain in {IGOFactory}.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="ihost"><a class="header" href="#ihost">IHost</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/lzApp/interfaces/IHost.sol">Git Source</a></p>
<p>Defines external and public functions for {LzVestingHostChain}.</p>
<h2 id="functions-3"><a class="header" href="#functions-3">Functions</a></h2>
<h3 id="init"><a class="header" href="#init">init</a></h3>
<p>Initialize {LzVestingHostChain} contract.</p>
<p>*Use <code>reinitializer(2)</code> as we initialize contract in 2 times:</p>
<ol>
<li>Common parts shared between crosschain and not crosschain IGOVesting
with <code>initializeCrowdfunding</code></li>
<li>Crosschain configuration with <code>init</code>
We could have refactor this into a single function though this would
prevent us from using a common method in IGOFactory to deploy IGOs and
IGOVesting not matter if crosschain compatible or not.*</li>
</ol>
<pre><code class="language-solidity">function init(address lzEndpoint_, uint16 hostChain_, uint16 targetChain_) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>lzEndpoint_</code></td><td><code>address</code></td><td>Address of the {ILayerZeroEndpoint}, see the official doc: https://layerzero.gitbook.io/docs/technical-reference/mainnet/supported-chain-ids</td></tr>
<tr><td><code>hostChain_</code></td><td><code>uint16</code></td><td>Current chain id of where the {IGO} and {LzVestingHostChain} are deployed, using nomenclature LayerZero.</td></tr>
<tr><td><code>targetChain_</code></td><td><code>uint16</code></td><td>Chain id where {LzClaimRefundTargetChain} is deployed, using LayerZero nomenclature.</td></tr>
</tbody></table>
</div>
<h3 id="estimatefee"><a class="header" href="#estimatefee">estimateFee</a></h3>
<p>Estimate fees for a crosschain transaction by requesting LayerZero endpoint.</p>
<pre><code class="language-solidity">function estimateFee(uint16 _dstChainId, bytes calldata _payload, bool _useZro, bytes calldata _adapterParams)
    external
    view
    returns (uint256 nativeFee, uint256 zroFee);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_dstChainId</code></td><td><code>uint16</code></td><td>Chain id where the call will be made to, using  LayerZero nomenclature.</td></tr>
<tr><td><code>_payload</code></td><td><code>bytes</code></td><td>Payload to send to the destination chain - abi.encode(...).</td></tr>
<tr><td><code>_useZro</code></td><td><code>bool</code></td><td>Whether to use ZERO token for fees or native (ETH, BNB, ARB, etc...).</td></tr>
<tr><td><code>_adapterParams</code></td><td><code>bytes</code></td><td>Params to send to the destination chain adapter - abi.encode(...).</td></tr>
</tbody></table>
</div>
<h3 id="gethostchain"><a class="header" href="#gethostchain">getHostChain</a></h3>
<p>Host chain where call are made from, using LayerZero nomenclature.</p>
<pre><code class="language-solidity">function getHostChain() external view returns (uint16);
</code></pre>
<h3 id="gettargetchain"><a class="header" href="#gettargetchain">getTargetChain</a></h3>
<p>Target chain where call are made to, using LayerZero nomenclature.</p>
<pre><code class="language-solidity">function getTargetChain() external view returns (uint16);
</code></pre>
<h3 id="hostclaimupdate"><a class="header" href="#hostclaimupdate">hostClaimUpdate</a></h3>
<p>Update vesting from crosschain call of {LzClaimRefundTargetChain} contract.</p>
<p><em>Send a call back to target chain to release the right amount of tokens to <code>_wallet</code>. Only
LayerZero endpoint can call this function.</em></p>
<pre><code class="language-solidity">function hostClaimUpdate(address _wallet) external payable;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_wallet</code></td><td><code>address</code></td><td>Address of the wallet which requested to claim their due on target chain from {LzClaimRefundTargetChain.claim}.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="itarget"><a class="header" href="#itarget">ITarget</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/lzApp/interfaces/ITarget.sol">Git Source</a></p>
<p>Defines external and public functions for {LzClaimRefundTargetChain}.</p>
<h2 id="functions-4"><a class="header" href="#functions-4">Functions</a></h2>
<h3 id="init-1"><a class="header" href="#init-1">init</a></h3>
<p>Initialize {LzClaimRefundTargetChain} contract.</p>
<p><em>Has <code>initializer</code> modifier.</em></p>
<pre><code class="language-solidity">function init(address lzEndpoint_, uint16 hostChain_, uint16 targetChain_, address vestedToken_) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>lzEndpoint_</code></td><td><code>address</code></td><td>Address of the {ILayerZeroEndpoint}, see the official doc: https://layerzero.gitbook.io/docs/technical-reference/mainnet/supported-chain-ids</td></tr>
<tr><td><code>hostChain_</code></td><td><code>uint16</code></td><td>Chain id of where the linked {IGO} and {LzVestingHostChain} are deployed, using nomenclature LayerZero.</td></tr>
<tr><td><code>targetChain_</code></td><td><code>uint16</code></td><td>Current chain id where {LzClaimRefundTargetChain} is deployed, using LayerZero nomenclature.</td></tr>
<tr><td><code>vestedToken_</code></td><td><code>address</code></td><td>Address of the vested token users will receive when calling {claim} - can be <code>address(0)</code> if token not deployed before claim contract.</td></tr>
</tbody></table>
</div>
<h3 id="estimatefee-1"><a class="header" href="#estimatefee-1">estimateFee</a></h3>
<p>Estimate fees for a crosschain transaction by requesting LayerZero endpoint.</p>
<pre><code class="language-solidity">function estimateFee(uint16 _dstChainId, bytes calldata _payload, bool _useZro, bytes calldata _adapterParams)
    external
    view
    returns (uint256 nativeFee, uint256 zroFee);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_dstChainId</code></td><td><code>uint16</code></td><td>Chain id where the call will be made to, using  LayerZero nomenclature.</td></tr>
<tr><td><code>_payload</code></td><td><code>bytes</code></td><td>Payload to send to the destination chain - abi.encode(...).</td></tr>
<tr><td><code>_useZro</code></td><td><code>bool</code></td><td>Whether to use ZERO token for fees or native (ETH, BNB, ARB, etc...).</td></tr>
<tr><td><code>_adapterParams</code></td><td><code>bytes</code></td><td>Params to send to the destination chain adapter - abi.encode(...).</td></tr>
</tbody></table>
</div>
<h3 id="gethostchain-1"><a class="header" href="#gethostchain-1">getHostChain</a></h3>
<p>Host chain where call are made to, using LayerZero nomenclature.</p>
<pre><code class="language-solidity">function getHostChain() external view returns (uint16);
</code></pre>
<h3 id="gettargetchain-1"><a class="header" href="#gettargetchain-1">getTargetChain</a></h3>
<p>Target chain where call are made from, using LayerZero nomenclature.</p>
<pre><code class="language-solidity">function getTargetChain() external view returns (uint16);
</code></pre>
<h3 id="getvestedtoken"><a class="header" href="#getvestedtoken">getVestedToken</a></h3>
<p><em>Address of vested token users will receive when calling {claim}.</em></p>
<pre><code class="language-solidity">function getVestedToken() external view returns (address);
</code></pre>
<h3 id="claim"><a class="header" href="#claim">claim</a></h3>
<p>Trigger the release of tokens to <code>msg.sender</code>, according to the vesting schedule on host
chain {LzVestingHostChain}. Updates the vesting schedule on host chain and then call back
made to here on target chain.</p>
<p><em>Call {hostClaimUpdate} in {LzVestingHostChain} on host chain to update IGOVesting.</em></p>
<pre><code class="language-solidity">function claim() external payable;
</code></pre>
<h3 id="refundonhostchain"><a class="header" href="#refundonhostchain">refundOnHostChain</a></h3>
<p><code>msg.sender</code>trigger their refund on host chain from current target chain (no call back).</p>
<p><em>This can fail on host chain depending on {LzVestingHostChain.refund} conditions.</em></p>
<pre><code class="language-solidity">function refundOnHostChain(string calldata _phaseId) external payable;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_phaseId</code></td><td><code>string</code></td><td>Phase id to be refunded from {LzVestingHostChain} contract on host chain.</td></tr>
</tbody></table>
</div>
<h3 id="updatevestedtoken"><a class="header" href="#updatevestedtoken">updateVestedToken</a></h3>
<p><em>New token to receive when calling {claim}, according to vesting schedule
({LzVestingHostChain} - on host chain).</em></p>
<pre><code class="language-solidity">function updateVestedToken(address _vestedToken) external;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="claimfactory"><a class="header" href="#claimfactory">ClaimFactory</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/lzApp/ClaimFactory.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/lzApp/ClaimFactory.sol//src/lzApp/interfaces/IClaimFactory.sol/interface.IClaimFactory.html">IClaimFactory</a>, <a href="src/lzApp/ClaimFactory.sol//src/lzApp/interfaces/internal/IClaimFactoryInternal.sol/interface.IClaimFactoryInternal.html">IClaimFactoryInternal</a>, NonblockingLzApp</p>
<p>Deploy {LzClaimRefundTargetChain} in a single transaction through crosschain call from host
chain.</p>
<p><em>{_nonblockingLzReceive} is in charge of cloning the {LzClaimRefundTargetChain} contract
and configuring it when a crosschain call is received.</em></p>
<h2 id="state-variables-1"><a class="header" href="#state-variables-1">State Variables</a></h2>
<h3 id="mingas-3"><a class="header" href="#mingas-3">minGas</a></h3>
<p><em>Minimum amount of gas to use in {saveCrosschainClaimInHostFactory}.</em></p>
<pre><code class="language-solidity">uint256 public override minGas = 350_000;
</code></pre>
<h3 id="defaultclaimrefund-1"><a class="header" href="#defaultclaimrefund-1">defaultClaimRefund</a></h3>
<p><em>Address of the new default {LzClaimRefundTargetChain} contract to clone.</em></p>
<pre><code class="language-solidity">address public override defaultClaimRefund;
</code></pre>
<h3 id="lastclaimcloned-1"><a class="header" href="#lastclaimcloned-1">lastClaimCloned</a></h3>
<p>Address of the last cloned {LzClaimRefundTargetChain} contract. Useful for
{saveCrosschainClaim} call.</p>
<pre><code class="language-solidity">address public override lastClaimCloned;
</code></pre>
<h3 id="igolinkeddetails-2"><a class="header" href="#igolinkeddetails-2">igoLinkedDetails</a></h3>
<p>Details of the {IGO} linked to the given <code>claim</code>.</p>
<pre><code class="language-solidity">mapping(address =&gt; IGOLinkedDetails) public override igoLinkedDetails;
</code></pre>
<h2 id="functions-5"><a class="header" href="#functions-5">Functions</a></h2>
<h3 id="constructor-1"><a class="header" href="#constructor-1">constructor</a></h3>
<pre><code class="language-solidity">constructor(address _endpoint, address claimRefund) NonblockingLzApp(_endpoint);
</code></pre>
<h3 id="updatedefaultclaim-1"><a class="header" href="#updatedefaultclaim-1">updateDefaultClaim</a></h3>
<p>Update {defaultClaimRefund} to clone on next {_cloneDefaultClaim} call.</p>
<pre><code class="language-solidity">function updateDefaultClaim(address newDefaultClaim) external onlyOwner;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>newDefaultClaim</code></td><td><code>address</code></td><td>Address of the new default {LzClaimRefundTargetChain} contract.</td></tr>
</tbody></table>
</div>
<h3 id="setmingas-3"><a class="header" href="#setmingas-3">setMinGas</a></h3>
<p>Update {minGas} to use in {saveCrosschainClaimInHostFactory._lzSend}.</p>
<pre><code class="language-solidity">function setMinGas(uint256 newMinGas) external onlyOwner;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>newMinGas</code></td><td><code>uint256</code></td><td>Value of the new minimum amount of gas.</td></tr>
</tbody></table>
</div>
<h3 id="savecrosschainclaiminhostfactory-1"><a class="header" href="#savecrosschainclaiminhostfactory-1">saveCrosschainClaimInHostFactory</a></h3>
<p>Manually save {LzClaimRefundTargetChain} linked to an {IGO} in {igoLinkedDetails}, on host
chain.</p>
<pre><code class="language-solidity">function saveCrosschainClaimInHostFactory(address claimToSave) public payable onlyOwner;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>claimToSave</code></td><td><code>address</code></td><td>Address of the {LzClaimRefundTargetChain} contract to save on host chain in {IGOFactory}.</td></tr>
</tbody></table>
</div>
<h3 id="_clonedefaultclaim"><a class="header" href="#_clonedefaultclaim">_cloneDefaultClaim</a></h3>
<p>Clone the {defaultClaimRefund} contract and emit {ClaimCloned} event.</p>
<pre><code class="language-solidity">function _cloneDefaultClaim(string memory name, address vesting) internal returns (address claimRefund);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>name</code></td><td><code>string</code></td><td>Name of the {IGO} linked to the {LzClaimRefundTargetChain} contract.</td></tr>
<tr><td><code>vesting</code></td><td><code>address</code></td><td>Address of the {LzVestingHostChain} contract linked to the {LzClaimRefundTargetChain} contract.</td></tr>
</tbody></table>
</div>
<h3 id="_configclaimrefund"><a class="header" href="#_configclaimrefund">_configClaimRefund</a></h3>
<p>Configure the {LzClaimRefundTargetChain} contract cloned in {_cloneDefaultClaim}.</p>
<pre><code class="language-solidity">function _configClaimRefund(
    address vesting,
    address lzEndpoint,
    uint16 hostChain,
    uint16 targetChain,
    address vestedToken,
    address claimRefund
) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vesting</code></td><td><code>address</code></td><td>Address of the {LzVestingHostChain} contract linked to the {LzClaimRefundTargetChain} contract.</td></tr>
<tr><td><code>lzEndpoint</code></td><td><code>address</code></td><td>Address of the {ILayerZeroEndpoint} of the curren chain, see official doc: https://layerzero.gitbook.io/docs/technical-reference/mainnet/supported-chain-ids</td></tr>
<tr><td><code>hostChain</code></td><td><code>uint16</code></td><td>Chain id of where the linked {IGO} and {LzVestingHostChain} are deployed, using LayerZero's nomenclature.</td></tr>
<tr><td><code>targetChain</code></td><td><code>uint16</code></td><td>Current chain id where {LzClaimRefundTargetChain} is deployed, using LayerZero's nomenclature.</td></tr>
<tr><td><code>vestedToken</code></td><td><code>address</code></td><td>Address of the vested token users will receive when calling {LzClaimRefundTargetChain.claim}.</td></tr>
<tr><td><code>claimRefund</code></td><td><code>address</code></td><td>Address of the {LzClaimRefundTargetChain} contract cloned on current chain.</td></tr>
</tbody></table>
</div>
<h3 id="_nonblockinglzreceive-1"><a class="header" href="#_nonblockinglzreceive-1">_nonblockingLzReceive</a></h3>
<p>Specific action to do when a crosschain call is received.</p>
<p><em>The payload contains the selector and the data to decode. If no selector matched the
transaction fails.</em></p>
<pre><code class="language-solidity">function _nonblockingLzReceive(uint16, bytes memory _srcAddress, uint64, bytes memory _payload) internal override;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="lzclaimrefundtargetchain"><a class="header" href="#lzclaimrefundtargetchain">LzClaimRefundTargetChain</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/lzApp/LzClaimRefundTargetChain.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/lzApp/LzClaimRefundTargetChain.sol//src/lzApp/interfaces/internal/ICrosschainErrorsInternal.sol/interface.ICrosschainErrorsInternal.html">ICrosschainErrorsInternal</a>, <a href="src/lzApp/LzClaimRefundTargetChain.sol//src/lzApp/interfaces/ITarget.sol/interface.ITarget.html">ITarget</a>, <a href="src/lzApp/LzClaimRefundTargetChain.sol//src/lzApp/interfaces/internal/ITargetInternal.sol/interface.ITargetInternal.html">ITargetInternal</a>, NonblockingLzAppUpgradeable</p>
<p>Contract to claim tokens using LayerZero's crosschain calls.</p>
<p><em>Relase schedule and amount are on host chain in {LzVestingHostChain}. Callbacks are made from there
to here, to release the exact amount of tokens to users.</em></p>
<h2 id="functions-6"><a class="header" href="#functions-6">Functions</a></h2>
<h3 id="receive"><a class="header" href="#receive">receive</a></h3>
<p>Contract can receive native tokens, especially from LayerZero endpoint</p>
<pre><code class="language-solidity">receive() external payable;
</code></pre>
<h3 id="init-2"><a class="header" href="#init-2">init</a></h3>
<p>Initialize {LzClaimRefundTargetChain} contract.</p>
<p><em>Has <code>initializer</code> modifier.</em></p>
<pre><code class="language-solidity">function init(address lzEndpoint_, uint16 hostChain_, uint16 targetChain_, address vestedToken_) external initializer;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>lzEndpoint_</code></td><td><code>address</code></td><td>Address of the {ILayerZeroEndpoint}, see the official doc: https://layerzero.gitbook.io/docs/technical-reference/mainnet/supported-chain-ids</td></tr>
<tr><td><code>hostChain_</code></td><td><code>uint16</code></td><td>Chain id of where the linked {IGO} and {LzVestingHostChain} are deployed, using nomenclature LayerZero.</td></tr>
<tr><td><code>targetChain_</code></td><td><code>uint16</code></td><td>Current chain id where {LzClaimRefundTargetChain} is deployed, using LayerZero nomenclature.</td></tr>
<tr><td><code>vestedToken_</code></td><td><code>address</code></td><td>Address of the vested token users will receive when calling {claim} - can be <code>address(0)</code> if token not deployed before claim contract.</td></tr>
</tbody></table>
</div>
<h3 id="gethostchain-2"><a class="header" href="#gethostchain-2">getHostChain</a></h3>
<p>Host chain where call are made to, using LayerZero nomenclature.</p>
<pre><code class="language-solidity">function getHostChain() external view returns (uint16);
</code></pre>
<h3 id="gettargetchain-2"><a class="header" href="#gettargetchain-2">getTargetChain</a></h3>
<p>Target chain where call are made from, using LayerZero nomenclature.</p>
<pre><code class="language-solidity">function getTargetChain() external view returns (uint16);
</code></pre>
<h3 id="getvestedtoken-1"><a class="header" href="#getvestedtoken-1">getVestedToken</a></h3>
<p><em>Address of vested token users will receive when calling {claim}.</em></p>
<pre><code class="language-solidity">function getVestedToken() external view returns (address);
</code></pre>
<h3 id="estimatefee-2"><a class="header" href="#estimatefee-2">estimateFee</a></h3>
<p>Estimate fees for a crosschain transaction by requesting LayerZero endpoint.</p>
<pre><code class="language-solidity">function estimateFee(uint16 _dstChainId, bytes calldata _payload, bool _useZro, bytes calldata _adapterParams)
    public
    view
    returns (uint256 nativeFee, uint256 zroFee);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_dstChainId</code></td><td><code>uint16</code></td><td>Chain id where the call will be made to, using  LayerZero nomenclature.</td></tr>
<tr><td><code>_payload</code></td><td><code>bytes</code></td><td>Payload to send to the destination chain - abi.encode(...).</td></tr>
<tr><td><code>_useZro</code></td><td><code>bool</code></td><td>Whether to use ZERO token for fees or native (ETH, BNB, ARB, etc...).</td></tr>
<tr><td><code>_adapterParams</code></td><td><code>bytes</code></td><td>Params to send to the destination chain adapter - abi.encode(...).</td></tr>
</tbody></table>
</div>
<h3 id="claim-1"><a class="header" href="#claim-1">claim</a></h3>
<p>Trigger the release of tokens to <code>msg.sender</code>, according to the vesting schedule on host
chain {LzVestingHostChain}. Updates the vesting schedule on host chain and then call back
made to here on target chain.</p>
<p><em>Call {hostClaimUpdate} in {LzVestingHostChain} on host chain to update IGOVesting.</em></p>
<pre><code class="language-solidity">function claim() public payable;
</code></pre>
<h3 id="refundonhostchain-1"><a class="header" href="#refundonhostchain-1">refundOnHostChain</a></h3>
<p><code>msg.sender</code>trigger their refund on host chain from current target chain (no call back).</p>
<p><em>define gasAmount after variable declaration for more accurate gas estimation. This will
be used to trigger <code>hostClaimUpdate</code> on host chain</em></p>
<p><em>add +20% than test <code>test_exposed_hostClaimUpdate_GasUsage</code></em></p>
<pre><code class="language-solidity">function refundOnHostChain(string calldata _phaseId) public payable;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_phaseId</code></td><td><code>string</code></td><td>Phase id to be refunded from {LzVestingHostChain} contract on host chain.</td></tr>
</tbody></table>
</div>
<h3 id="updatevestedtoken-1"><a class="header" href="#updatevestedtoken-1">updateVestedToken</a></h3>
<p><em>New token to receive when calling {claim}, according to vesting schedule
({LzVestingHostChain} - on host chain).</em></p>
<pre><code class="language-solidity">function updateVestedToken(address _vestedToken) public onlyOwner;
</code></pre>
<h3 id="_releasetokentouser"><a class="header" href="#_releasetokentouser">_releaseTokenToUser</a></h3>
<p>Release vested tokens to <code>_wallet</code> according to the vesting schedule on host chain.</p>
<p><em>Triggered on callback from {LzVestingHostChain} contract on host chain:
{claim} -&gt; {hostClaimUpdate} host chain -&gt; {_releaseTokenToUser}.</em></p>
<pre><code class="language-solidity">function _releaseTokenToUser(address _wallet, uint256 releaseAmount) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_wallet</code></td><td><code>address</code></td><td>Address which called {claim}.</td></tr>
<tr><td><code>releaseAmount</code></td><td><code>uint256</code></td><td>Amount of vested tokens to release to <code>_wallet</code>.</td></tr>
</tbody></table>
</div>
<h3 id="_nonblockinglzreceive-2"><a class="header" href="#_nonblockinglzreceive-2">_nonblockingLzReceive</a></h3>
<p>Specific action to do when a crosschain call is received.</p>
<p><em>The payload contains the selector and the data to decode. If no selector matched the
transaction fails.</em></p>
<pre><code class="language-solidity">function _nonblockingLzReceive(uint16, bytes memory, uint64, bytes memory _payload) internal override;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="lzstorage"><a class="header" href="#lzstorage">LzStorage</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/lzApp/LzStorage.sol">Git Source</a></p>
<p>Mapps the storage layout of LayerZero dependend contracts:</p>
<ul>
<li>{LzClaimRefundTargetChain};</li>
<li>{LzVestingHostChain} contract;</li>
</ul>
<p><em>Diamond proxy (ERC-2535) storage style.</em></p>
<h2 id="state-variables-2"><a class="header" href="#state-variables-2">State Variables</a></h2>
<h3 id="lz_storage"><a class="header" href="#lz_storage">LZ_STORAGE</a></h3>
<p>Storage position of {LzStorage} in contracts using it.</p>
<pre><code class="language-solidity">bytes32 public constant LZ_STORAGE = keccak256(&quot;lz.storage&quot;);
</code></pre>
<h3 id="crosschain_clone_claim_selector"><a class="header" href="#crosschain_clone_claim_selector">CROSSCHAIN_CLONE_CLAIM_SELECTOR</a></h3>
<p>Custom selector to clone and configure {LzClaimRefundTargetChain}.</p>
<p><em><code>_crosschainCloneClaim</code> does not exists, though it helps to identify the
methods to call in {ClaimFactory._nonblockingLzReceive}.</em></p>
<pre><code class="language-solidity">bytes4 public constant CROSSCHAIN_CLONE_CLAIM_SELECTOR =
    bytes4(keccak256(&quot;_crosschainCloneClaim(string,address,address,uint16,uint16,address)&quot;));
</code></pre>
<h3 id="link_claim_to_igo__callback"><a class="header" href="#link_claim_to_igo__callback">LINK_CLAIM_TO_IGO__CALLBACK</a></h3>
<p>Custom selector to save cloned {LzClaimRefundTargetChain} in {IGOFactory} through
crosschain call from {ClaimFactory.saveCrosschainClaimInHostFactory}.</p>
<pre><code class="language-solidity">bytes4 public constant LINK_CLAIM_TO_IGO__CALLBACK = bytes4(keccak256(&quot;LINK_CLAIM_TO_IGO__CALLBACK&quot;));
</code></pre>
<h3 id="lz_hostclaim_selector"><a class="header" href="#lz_hostclaim_selector">LZ_HOSTCLAIM_SELECTOR</a></h3>
<p><em>Custom selector to update vesting schedule on host from crosschain call.</em></p>
<pre><code class="language-solidity">bytes4 public constant LZ_HOSTCLAIM_SELECTOR = bytes4(keccak256(&quot;hostClaimUpdate(address)&quot;));
</code></pre>
<h3 id="lz_release_token_selector"><a class="header" href="#lz_release_token_selector">LZ_RELEASE_TOKEN_SELECTOR</a></h3>
<p><em>Custom selector to release token to user on target chain from crosschain call.</em></p>
<pre><code class="language-solidity">bytes4 public constant LZ_RELEASE_TOKEN_SELECTOR = bytes4(keccak256(&quot;_releaseTokenToUser(address,uint256)&quot;));
</code></pre>
<h3 id="lz_refund_selector"><a class="header" href="#lz_refund_selector">LZ_REFUND_SELECTOR</a></h3>
<p><em>Custom selector to refun tokens to user on host chain from crosschain call.</em></p>
<pre><code class="language-solidity">bytes4 public constant LZ_REFUND_SELECTOR = bytes4(keccak256(&quot;_refundLz(string,address)&quot;));
</code></pre>
<h2 id="functions-7"><a class="header" href="#functions-7">Functions</a></h2>
<h3 id="layout"><a class="header" href="#layout">layout</a></h3>
<pre><code class="language-solidity">function layout() internal pure returns (LzStruct storage lzStruct);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>lzStruct</code></td><td><code>LzStruct</code></td><td>Whole storage of {LzClaimRefundTargetChain} and {LzVestingHostChain} contracts.</td></tr>
</tbody></table>
</div>
<h2 id="structs-2"><a class="header" href="#structs-2">Structs</a></h2>
<h3 id="lzstruct"><a class="header" href="#lzstruct">LzStruct</a></h3>
<p>Struct reprensenting data required by all LayerZero calls.</p>
<pre><code class="language-solidity">struct LzStruct {
    uint16 hostChain;
    uint16 targetChain;
    address vestedToken;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="lzvestinghostchain"><a class="header" href="#lzvestinghostchain">LzVestingHostChain</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/lzApp/LzVestingHostChain.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/lzApp/LzVestingHostChain.sol//src/lzApp/interfaces/internal/ICrosschainErrorsInternal.sol/interface.ICrosschainErrorsInternal.html">ICrosschainErrorsInternal</a>, <a href="src/lzApp/LzVestingHostChain.sol//src/lzApp/interfaces/IHost.sol/interface.IHost.html">IHost</a>, <a href="src/lzApp/LzVestingHostChain.sol//src/lzApp/interfaces/internal/IHostInternal.sol/interface.IHostInternal.html">IHostInternal</a>, NonblockingLzAppUpgradeable, IGOVesting</p>
<p>Contract inheriting from {IGOVesting} (developed by Decubate) to manage crosschain vesting
updates.</p>
<p><em>The contract only receive calls from LayerZero endpoint which come from {LzClaimRefundTargetChain}
on target chain.</em></p>
<h2 id="functions-8"><a class="header" href="#functions-8">Functions</a></h2>
<h3 id="receive-1"><a class="header" href="#receive-1">receive</a></h3>
<pre><code class="language-solidity">receive() external payable;
</code></pre>
<h3 id="init-3"><a class="header" href="#init-3">init</a></h3>
<p>Initialize {LzVestingHostChain} contract.</p>
<p>*Use <code>reinitializer(2)</code> as we initialize contract in 2 times:</p>
<ol>
<li>Common parts shared between crosschain and not crosschain IGOVesting
with <code>initializeCrowdfunding</code></li>
<li>Crosschain configuration with <code>init</code>
We could have refactor this into a single function though this would
prevent us from using a common method in IGOFactory to deploy IGOs and
IGOVesting not matter if crosschain compatible or not.*</li>
</ol>
<pre><code class="language-solidity">function init(address lzEndpoint_, uint16 hostChain_, uint16 targetChain_) external override reinitializer(2);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>lzEndpoint_</code></td><td><code>address</code></td><td>Address of the {ILayerZeroEndpoint}, see the official doc: https://layerzero.gitbook.io/docs/technical-reference/mainnet/supported-chain-ids</td></tr>
<tr><td><code>hostChain_</code></td><td><code>uint16</code></td><td>Current chain id of where the {IGO} and {LzVestingHostChain} are deployed, using nomenclature LayerZero.</td></tr>
<tr><td><code>targetChain_</code></td><td><code>uint16</code></td><td>Chain id where {LzClaimRefundTargetChain} is deployed, using LayerZero nomenclature.</td></tr>
</tbody></table>
</div>
<h3 id="estimatefee-3"><a class="header" href="#estimatefee-3">estimateFee</a></h3>
<p>Estimate fees for a crosschain transaction by requesting LayerZero endpoint.</p>
<pre><code class="language-solidity">function estimateFee(uint16 _dstChainId, bytes calldata _payload, bool _useZro, bytes calldata _adapterParams)
    public
    view
    override
    returns (uint256 nativeFee, uint256 zroFee);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_dstChainId</code></td><td><code>uint16</code></td><td>Chain id where the call will be made to, using  LayerZero nomenclature.</td></tr>
<tr><td><code>_payload</code></td><td><code>bytes</code></td><td>Payload to send to the destination chain - abi.encode(...).</td></tr>
<tr><td><code>_useZro</code></td><td><code>bool</code></td><td>Whether to use ZERO token for fees or native (ETH, BNB, ARB, etc...).</td></tr>
<tr><td><code>_adapterParams</code></td><td><code>bytes</code></td><td>Params to send to the destination chain adapter - abi.encode(...).</td></tr>
</tbody></table>
</div>
<h3 id="gethostchain-3"><a class="header" href="#gethostchain-3">getHostChain</a></h3>
<p>Host chain where call are made from, using LayerZero nomenclature.</p>
<pre><code class="language-solidity">function getHostChain() external view override returns (uint16);
</code></pre>
<h3 id="gettargetchain-3"><a class="header" href="#gettargetchain-3">getTargetChain</a></h3>
<p>Target chain where call are made to, using LayerZero nomenclature.</p>
<pre><code class="language-solidity">function getTargetChain() external view override returns (uint16);
</code></pre>
<h3 id="hostclaimupdate-1"><a class="header" href="#hostclaimupdate-1">hostClaimUpdate</a></h3>
<p>Update vesting from crosschain call of {LzClaimRefundTargetChain} contract.</p>
<p><em>Send a call back to target chain to release the right amount of tokens to <code>_wallet</code>. Only
LayerZero endpoint can call this function.</em></p>
<pre><code class="language-solidity">function hostClaimUpdate(address _wallet) public payable override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_wallet</code></td><td><code>address</code></td><td>Address of the wallet which requested to claim their due on target chain from {LzClaimRefundTargetChain.claim}.</td></tr>
</tbody></table>
</div>
<h3 id="transferownership"><a class="header" href="#transferownership">transferOwnership</a></h3>
<pre><code class="language-solidity">function transferOwnership(address newOwner) public virtual override(OwnableUpgradeable, IGOVesting) onlyOwner;
</code></pre>
<h3 id="_nonblockinglzreceive-3"><a class="header" href="#_nonblockinglzreceive-3">_nonblockingLzReceive</a></h3>
<p>Specific action to do when a crosschain call is received.</p>
<p><em>The payload contains the selector and the data to decode. If no selector matched the
transaction fails.</em></p>
<pre><code class="language-solidity">function _nonblockingLzReceive(uint16, bytes memory, uint64, bytes memory _payload) internal override;
</code></pre>
<h3 id="_hostclaimupdate"><a class="header" href="#_hostclaimupdate">_hostClaimUpdate</a></h3>
<pre><code class="language-solidity">function _hostClaimUpdate(address _wallet) internal;
</code></pre>
<h3 id="_refundlz"><a class="header" href="#_refundlz">_refundLz</a></h3>
<p><em>define gasAmount after variable declaration for more accurate
gas estimation this will be used to trigger <code>_releaseTokenToUser</code>
on target chain</em></p>
<p><em>Only Layerero endpoint can call this function to refund users.</em></p>
<pre><code class="language-solidity">function _refundLz(address _wallet, string memory _phaseId) internal userInWhitelist(_wallet);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-4"><a class="header" href="#contents-4">Contents</a></h1>
<ul>
<li><a href="src/readable/IGOReadable.sol/contract.IGOReadable.html">IGOReadable</a></li>
<li><a href="src/readable/IIGOReadable.sol/interface.IIGOReadable.html">IIGOReadable</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="igoreadable"><a class="header" href="#igoreadable">IGOReadable</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/readable/IGOReadable.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/readable/IGOReadable.sol//src/readable/IIGOReadable.sol/interface.IIGOReadable.html">IIGOReadable</a>, <a href="src/readable/IGOReadable.sol//src/writable/IIGOWritableInternal.sol/interface.IIGOWritableInternal.html">IIGOWritableInternal</a>, <a href="src/readable/IGOReadable.sol//src/writable/restricted/IRestrictedWritableInternal.sol/interface.IRestrictedWritableInternal.html">IRestrictedWritableInternal</a>, <a href="src/readable/IGOReadable.sol//src/shared/ISharedInternal.sol/interface.ISharedInternal.html">ISharedInternal</a></p>
<p>Read-only contract of {IGO} data.</p>
<h2 id="functions-9"><a class="header" href="#functions-9">Functions</a></h2>
<h3 id="allocationreservedbyin"><a class="header" href="#allocationreservedbyin">allocationReservedByIn</a></h3>
<pre><code class="language-solidity">function allocationReservedByIn(address account, string calldata phaseId) external view override returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>account</code></td><td><code>address</code></td><td>Address of the user.</td></tr>
<tr><td><code>phaseId</code></td><td><code>string</code></td><td>Identifier of the phase.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Amount of {IGOStorage.SetUp.paymentToken} paid by <code>account</code> for the phase <code>phaseId</code>.</td></tr>
</tbody></table>
</div>
<h3 id="igostatus"><a class="header" href="#igostatus">igoStatus</a></h3>
<pre><code class="language-solidity">function igoStatus() external view override returns (Status);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>Status</code></td><td>Enum representing the current status of the IGO.</td></tr>
</tbody></table>
</div>
<h3 id="raisedinphase"><a class="header" href="#raisedinphase">raisedInPhase</a></h3>
<pre><code class="language-solidity">function raisedInPhase(string memory phaseId) external view override returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>phaseId</code></td><td><code>string</code></td><td>Identifier of the phase.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Amount of {IGOStorage.SetUp.paymentToken} raised for the phase <code>phaseId</code>.</td></tr>
</tbody></table>
</div>
<h3 id="setup"><a class="header" href="#setup">setUp</a></h3>
<pre><code class="language-solidity">function setUp()
    external
    view
    override
    returns (
        address vestingContract,
        address paymentToken,
        uint256 grandTotal,
        uint256 summedMaxPhaseCap,
        uint256 refundFeeDecimals
    );
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vestingContract</code></td><td><code>address</code></td><td>Address of the {IGOVesting} contract.</td></tr>
<tr><td><code>paymentToken</code></td><td><code>address</code></td><td>Address of the default token used to reserve allocation through the IGO.</td></tr>
<tr><td><code>grandTotal</code></td><td><code>uint256</code></td><td>Maximum amount of paymentToken that can be raised for this IGO accross all phases.</td></tr>
<tr><td><code>summedMaxPhaseCap</code></td><td><code>uint256</code></td><td>Sum of maximum cap of each phase, which can be lower or equal to <code>grandTotal</code>.</td></tr>
<tr><td><code>refundFeeDecimals</code></td><td><code>uint256</code></td><td>Number of decimals used for {IIGOWritableInternal.Allocation.refundFee}.</td></tr>
</tbody></table>
</div>
<h3 id="phase"><a class="header" href="#phase">phase</a></h3>
<pre><code class="language-solidity">function phase(string memory phaseId) external view override returns (Phase memory phase_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>phaseId</code></td><td><code>string</code></td><td>Identifier of the phase.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>phase_</code></td><td><code>Phase</code></td><td>Phase struct representing the data of the phase <code>phaseId</code>.</td></tr>
</tbody></table>
</div>
<h3 id="phaseids"><a class="header" href="#phaseids">phaseIds</a></h3>
<pre><code class="language-solidity">function phaseIds() external view override returns (string[] memory phaseIds_);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>phaseIds_</code></td><td><code>string[]</code></td><td>List of all phases identifiers.</td></tr>
</tbody></table>
</div>
<h3 id="totalraised"><a class="header" href="#totalraised">totalRaised</a></h3>
<pre><code class="language-solidity">function totalRaised() external view override returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Total amount of {IGOStorage.SetUp.paymentToken} raised for this IGO.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="iigoreadable"><a class="header" href="#iigoreadable">IIGOReadable</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/readable/IIGOReadable.sol">Git Source</a></p>
<p>Interface made for read-only data from {IGO}.</p>
<h2 id="functions-10"><a class="header" href="#functions-10">Functions</a></h2>
<h3 id="allocationreservedbyin-1"><a class="header" href="#allocationreservedbyin-1">allocationReservedByIn</a></h3>
<pre><code class="language-solidity">function allocationReservedByIn(address account, string calldata phaseId) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>account</code></td><td><code>address</code></td><td>Address of the user.</td></tr>
<tr><td><code>phaseId</code></td><td><code>string</code></td><td>Identifier of the phase.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Amount of {IGOStorage.SetUp.paymentToken} paid by <code>account</code> for the phase <code>phaseId</code>.</td></tr>
</tbody></table>
</div>
<h3 id="igostatus-1"><a class="header" href="#igostatus-1">igoStatus</a></h3>
<pre><code class="language-solidity">function igoStatus() external view returns (ISharedInternal.Status);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>ISharedInternal.Status</code></td><td>Enum representing the current status of the IGO.</td></tr>
</tbody></table>
</div>
<h3 id="raisedinphase-1"><a class="header" href="#raisedinphase-1">raisedInPhase</a></h3>
<pre><code class="language-solidity">function raisedInPhase(string memory phaseId) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>phaseId</code></td><td><code>string</code></td><td>Identifier of the phase.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Amount of {IGOStorage.SetUp.paymentToken} raised for the phase <code>phaseId</code>.</td></tr>
</tbody></table>
</div>
<h3 id="setup-1"><a class="header" href="#setup-1">setUp</a></h3>
<pre><code class="language-solidity">function setUp()
    external
    view
    returns (
        address vestingContract,
        address paymentToken,
        uint256 grandTotal,
        uint256 summedMaxPhaseCap,
        uint256 refundFeeDecimals
    );
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vestingContract</code></td><td><code>address</code></td><td>Address of the {IGOVesting} contract.</td></tr>
<tr><td><code>paymentToken</code></td><td><code>address</code></td><td>Address of the default token used to reserve allocation through the IGO.</td></tr>
<tr><td><code>grandTotal</code></td><td><code>uint256</code></td><td>Maximum amount of paymentToken that can be raised for this IGO accross all phases.</td></tr>
<tr><td><code>summedMaxPhaseCap</code></td><td><code>uint256</code></td><td>Sum of maximum cap of each phase, which can be lower or equal to <code>grandTotal</code>.</td></tr>
<tr><td><code>refundFeeDecimals</code></td><td><code>uint256</code></td><td>Number of decimals used for {IIGOWritableInternal.Allocation.refundFee}.</td></tr>
</tbody></table>
</div>
<h3 id="phase-1"><a class="header" href="#phase-1">phase</a></h3>
<pre><code class="language-solidity">function phase(string memory phaseId) external view returns (ISharedInternal.Phase memory phase_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>phaseId</code></td><td><code>string</code></td><td>Identifier of the phase.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>phase_</code></td><td><code>ISharedInternal.Phase</code></td><td>Phase struct representing the data of the phase <code>phaseId</code>.</td></tr>
</tbody></table>
</div>
<h3 id="phaseids-1"><a class="header" href="#phaseids-1">phaseIds</a></h3>
<pre><code class="language-solidity">function phaseIds() external view returns (string[] memory phaseIds_);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>phaseIds_</code></td><td><code>string[]</code></td><td>List of all phases identifiers.</td></tr>
</tbody></table>
</div>
<h3 id="totalraised-1"><a class="header" href="#totalraised-1">totalRaised</a></h3>
<pre><code class="language-solidity">function totalRaised() external view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Total amount of {IGOStorage.SetUp.paymentToken} raised for this IGO.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="contents-5"><a class="header" href="#contents-5">Contents</a></h1>
<ul>
<li><a href="src/shared/ISharedInternal.sol/interface.ISharedInternal.html">ISharedInternal</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="isharedinternal"><a class="header" href="#isharedinternal">ISharedInternal</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/shared/ISharedInternal.sol">Git Source</a></p>
<p>Interface shared betwen all modules of the IGO contract.</p>
<p><em>Defines shared enum, struct, events and errors.</em></p>
<h2 id="structs-3"><a class="header" href="#structs-3">Structs</a></h2>
<h3 id="phase-2"><a class="header" href="#phase-2">Phase</a></h3>
<p>Shared struct representing the data of a phase.</p>
<pre><code class="language-solidity">struct Phase {
    Status status;
    bytes32 merkleRoot;
    uint128 startAt;
    uint128 endAt;
    uint256 maxPhaseCap;
}
</code></pre>
<h2 id="enums"><a class="header" href="#enums">Enums</a></h2>
<h3 id="status"><a class="header" href="#status">Status</a></h3>
<p>Shared enum representing the different status of a phase or the whole IGO.</p>
<pre><code class="language-solidity">enum Status {
    NOT_STARTED,
    OPENED,
    COMPLETED,
    PAUSED
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-6"><a class="header" href="#contents-6">Contents</a></h1>
<ul>
<li><a href="src/writable//src/writable/restricted">restricted</a></li>
<li><a href="src/writable/IGOWritable.sol/contract.IGOWritable.html">IGOWritable</a></li>
<li><a href="src/writable/IGOWritableInternal.sol/contract.IGOWritableInternal.html">IGOWritableInternal</a></li>
<li><a href="src/writable/IIGOWritable.sol/interface.IIGOWritable.html">IIGOWritable</a></li>
<li><a href="src/writable/IIGOWritableInternal.sol/interface.IIGOWritableInternal.html">IIGOWritableInternal</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-7"><a class="header" href="#contents-7">Contents</a></h1>
<ul>
<li><a href="src/writable/restricted/IRestrictedWritable.sol/interface.IRestrictedWritable.html">IRestrictedWritable</a></li>
<li><a href="src/writable/restricted/IRestrictedWritableInternal.sol/interface.IRestrictedWritableInternal.html">IRestrictedWritableInternal</a></li>
<li><a href="src/writable/restricted/RestrictedWritable.sol/contract.RestrictedWritable.html">RestrictedWritable</a></li>
<li><a href="src/writable/restricted/RestrictedWritableInternal.sol/contract.RestrictedWritableInternal.html">RestrictedWritableInternal</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="irestrictedwritable"><a class="header" href="#irestrictedwritable">IRestrictedWritable</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/writable/restricted/IRestrictedWritable.sol">Git Source</a></p>
<p>Only the owner of the contract can call these methods.</p>
<h2 id="functions-11"><a class="header" href="#functions-11">Functions</a></h2>
<h3 id="initialize"><a class="header" href="#initialize">initialize</a></h3>
<p><em>Initialize whole IGO contract.</em></p>
<pre><code class="language-solidity">function initialize(
    address owner,
    IGOStorage.SetUp calldata setUp,
    string[] calldata phaseIds_,
    ISharedInternal.Phase[] calldata phases
) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner</code></td><td><code>address</code></td><td>The address interacting with {IGOFactory} through {IGOFactory.createIGO} or {IGOFactory.createCrosschainIGO} which can call <code>onlyRole(DEFAULT_ADMIN_ROLE)</code> functions.</td></tr>
<tr><td><code>setUp</code></td><td><code>IGOStorage.SetUp</code></td><td>{IGOStorage.SetUp} struct to be saved.</td></tr>
<tr><td><code>phaseIds_</code></td><td><code>string[]</code></td><td>Array of identifiers of <code>phases</code> - can be empty.</td></tr>
<tr><td><code>phases</code></td><td><code>ISharedInternal.Phase[]</code></td><td>Array of {ISharedInternal.Phase[} to be saved - can be empty.</td></tr>
</tbody></table>
</div>
<h3 id="openigo"><a class="header" href="#openigo">openIGO</a></h3>
<pre><code class="language-solidity">function openIGO() external;
</code></pre>
<h3 id="pauseigo"><a class="header" href="#pauseigo">pauseIGO</a></h3>
<pre><code class="language-solidity">function pauseIGO() external;
</code></pre>
<h3 id="updategrandtotal"><a class="header" href="#updategrandtotal">updateGrandTotal</a></h3>
<pre><code class="language-solidity">function updateGrandTotal(uint256 grandTotal_) external;
</code></pre>
<h3 id="recoverlosterc20"><a class="header" href="#recoverlosterc20">recoverLostERC20</a></h3>
<p><em>Retrieve any ERC20 sent to the contract by mistake.</em></p>
<pre><code class="language-solidity">function recoverLostERC20(address token, address to) external;
</code></pre>
<h3 id="setowner"><a class="header" href="#setowner">setOwner</a></h3>
<p><em>IGO will always be deployed by IGOFactory using Clones.cloneDeterministic.
Deployment and owner is set in same transaction IGOFactory.createIGO so no one can front run
the IGOFactory for owner rights.</em></p>
<pre><code class="language-solidity">function setOwner() external;
</code></pre>
<h3 id="updatesetphase"><a class="header" href="#updatesetphase">updateSetPhase</a></h3>
<p><em>Update or create a phase with all its data.</em></p>
<pre><code class="language-solidity">function updateSetPhase(string calldata phaseId_, ISharedInternal.Phase calldata phase_) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>phaseId_</code></td><td><code>string</code></td><td>Identifier of phase to set or update.</td></tr>
<tr><td><code>phase_</code></td><td><code>ISharedInternal.Phase</code></td><td>Struct {ISharedInternal.Phase} containing phase's data to be saved.</td></tr>
</tbody></table>
</div>
<h3 id="updatesetphases"><a class="header" href="#updatesetphases">updateSetPhases</a></h3>
<p><em>Update or create multiple phases with all their data.</em></p>
<pre><code class="language-solidity">function updateSetPhases(string[] calldata phaseIdentifiers_, ISharedInternal.Phase[] calldata phases_) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>phaseIdentifiers_</code></td><td><code>string[]</code></td><td>Array of identifiers of <code>phases</code>.</td></tr>
<tr><td><code>phases_</code></td><td><code>ISharedInternal.Phase[]</code></td><td>Array of struct {ISharedInternal.Phase} containing phases' data to be saved.</td></tr>
</tbody></table>
</div>
<h3 id="openphase"><a class="header" href="#openphase">openPhase</a></h3>
<pre><code class="language-solidity">function openPhase(string calldata phaseId) external;
</code></pre>
<h3 id="pausephase"><a class="header" href="#pausephase">pausePhase</a></h3>
<pre><code class="language-solidity">function pausePhase(string calldata phaseId) external;
</code></pre>
<h3 id="updatephasemerkleroot"><a class="header" href="#updatephasemerkleroot">updatePhaseMerkleRoot</a></h3>
<p>Update the merkle root of a phase to update a single or multiple wallet allocation,
refund fee, payment token etc.</p>
<pre><code class="language-solidity">function updatePhaseMerkleRoot(string calldata phaseId, bytes32 merkleRoot) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>phaseId</code></td><td><code>string</code></td><td>Identifier of the phase.</td></tr>
<tr><td><code>merkleRoot</code></td><td><code>bytes32</code></td><td>New merkle root to be saved for this phase.</td></tr>
</tbody></table>
</div>
<h3 id="updatephasestartdate"><a class="header" href="#updatephasestartdate">updatePhaseStartDate</a></h3>
<pre><code class="language-solidity">function updatePhaseStartDate(string calldata phaseId, uint128 startAt) external;
</code></pre>
<h3 id="updatephaseenddate"><a class="header" href="#updatephaseenddate">updatePhaseEndDate</a></h3>
<pre><code class="language-solidity">function updatePhaseEndDate(string calldata phaseId, uint128 endAt) external;
</code></pre>
<h3 id="updatephasemaxcap"><a class="header" href="#updatephasemaxcap">updatePhaseMaxCap</a></h3>
<pre><code class="language-solidity">function updatePhaseMaxCap(string calldata phaseId, uint256 maxPhaseCap) external;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="irestrictedwritableinternal"><a class="header" href="#irestrictedwritableinternal">IRestrictedWritableInternal</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/writable/restricted/IRestrictedWritableInternal.sol">Git Source</a></p>
<p>Defines struct, event and error used in {RestrictedWritableInternal} &amp; {RestrictedWritable}.</p>
<h2 id="errors-5"><a class="header" href="#errors-5">Errors</a></h2>
<h3 id="restrictedwritableinternal_differentarrayslength"><a class="header" href="#restrictedwritableinternal_differentarrayslength">RestrictedWritableInternal_DifferentArraysLength</a></h3>
<pre><code class="language-solidity">error RestrictedWritableInternal_DifferentArraysLength();
</code></pre>
<h3 id="restrictedwritableinternal_emptyphase"><a class="header" href="#restrictedwritableinternal_emptyphase">RestrictedWritableInternal_EmptyPhase</a></h3>
<pre><code class="language-solidity">error RestrictedWritableInternal_EmptyPhase();
</code></pre>
<h3 id="restrictedwritableinternal_summedmaxphasecapgtgrandtotal"><a class="header" href="#restrictedwritableinternal_summedmaxphasecapgtgrandtotal">RestrictedWritableInternal_SummedMaxPhaseCapGtGrandTotal</a></h3>
<pre><code class="language-solidity">error RestrictedWritableInternal_SummedMaxPhaseCapGtGrandTotal(uint256 greaterBy);
</code></pre>
<h3 id="restrictedwritable_init_owneriszeroaddr"><a class="header" href="#restrictedwritable_init_owneriszeroaddr">RestrictedWritable_Init_OwnerIsZeroAddr</a></h3>
<pre><code class="language-solidity">error RestrictedWritable_Init_OwnerIsZeroAddr();
</code></pre>
<h3 id="restrictedwritable_init_vestingcontractiszeroaddr"><a class="header" href="#restrictedwritable_init_vestingcontractiszeroaddr">RestrictedWritable_Init_VestingContractIsZeroAddr</a></h3>
<pre><code class="language-solidity">error RestrictedWritable_Init_VestingContractIsZeroAddr();
</code></pre>
<h3 id="restrictedwritable_init_paymenttokeniszeroaddr"><a class="header" href="#restrictedwritable_init_paymenttokeniszeroaddr">RestrictedWritable_Init_PaymentTokenIsZeroAddr</a></h3>
<pre><code class="language-solidity">error RestrictedWritable_Init_PaymentTokenIsZeroAddr();
</code></pre>
<h3 id="restrictedwritable_init_permit2iszeroaddr"><a class="header" href="#restrictedwritable_init_permit2iszeroaddr">RestrictedWritable_Init_Permit2IsZeroAddr</a></h3>
<pre><code class="language-solidity">error RestrictedWritable_Init_Permit2IsZeroAddr();
</code></pre>
<h3 id="restrictedwritable_init_grandtotaliszero"><a class="header" href="#restrictedwritable_init_grandtotaliszero">RestrictedWritable_Init_GrandTotalIsZero</a></h3>
<pre><code class="language-solidity">error RestrictedWritable_Init_GrandTotalIsZero();
</code></pre>
<h3 id="restrictedwritable_emptymerkleroot"><a class="header" href="#restrictedwritable_emptymerkleroot">RestrictedWritable_EmptyMerkleRoot</a></h3>
<p><em>Thrown when merkle root is equal to bytes32(0).</em></p>
<pre><code class="language-solidity">error RestrictedWritable_EmptyMerkleRoot();
</code></pre>
<h3 id="restrictedwritable_emptyphase"><a class="header" href="#restrictedwritable_emptyphase">RestrictedWritable_EmptyPhase</a></h3>
<pre><code class="language-solidity">error RestrictedWritable_EmptyPhase();
</code></pre>
<h3 id="restrictedwritable_endinpast"><a class="header" href="#restrictedwritable_endinpast">RestrictedWritable_EndInPast</a></h3>
<pre><code class="language-solidity">error RestrictedWritable_EndInPast();
</code></pre>
<h3 id="restrictedwritable_grandtotallt__1_000"><a class="header" href="#restrictedwritable_grandtotallt__1_000">RestrictedWritable_GrandTotalLt__1_000</a></h3>
<pre><code class="language-solidity">error RestrictedWritable_GrandTotalLt__1_000();
</code></pre>
<h3 id="restrictedwritable_startinpast"><a class="header" href="#restrictedwritable_startinpast">RestrictedWritable_StartInPast</a></h3>
<pre><code class="language-solidity">error RestrictedWritable_StartInPast();
</code></pre>
<h3 id="restrictedwritable_tokeniszeroaddr"><a class="header" href="#restrictedwritable_tokeniszeroaddr">RestrictedWritable_TokenIsZeroAddr</a></h3>
<pre><code class="language-solidity">error RestrictedWritable_TokenIsZeroAddr();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="restrictedwritable"><a class="header" href="#restrictedwritable">RestrictedWritable</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/writable/restricted/RestrictedWritable.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/writable/restricted/RestrictedWritable.sol//src/writable/restricted/IRestrictedWritable.sol/interface.IRestrictedWritable.html">IRestrictedWritable</a>, <a href="src/writable/restricted/RestrictedWritable.sol//src/writable/restricted/RestrictedWritableInternal.sol/contract.RestrictedWritableInternal.html">RestrictedWritableInternal</a>, AccessControlEnumerable, Initializable</p>
<p><em>Inherits from <code>ISharedInternal</code> will create <code>error[5005]: Linearization of inheritance graph impossible</code></em></p>
<h2 id="functions-12"><a class="header" href="#functions-12">Functions</a></h2>
<h3 id="initialize-1"><a class="header" href="#initialize-1">initialize</a></h3>
<p><em>Initialize whole IGO contract.</em></p>
<pre><code class="language-solidity">function initialize(
    address owner,
    IGOStorage.SetUp calldata setUp,
    string[] calldata phaseIds_,
    ISharedInternal.Phase[] calldata phases
) external override reinitializer(2) onlyRole(DEFAULT_ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner</code></td><td><code>address</code></td><td>The address interacting with {IGOFactory} through {IGOFactory.createIGO} or {IGOFactory.createCrosschainIGO} which can call <code>onlyRole(DEFAULT_ADMIN_ROLE)</code> functions.</td></tr>
<tr><td><code>setUp</code></td><td><code>IGOStorage.SetUp</code></td><td>{IGOStorage.SetUp} struct to be saved.</td></tr>
<tr><td><code>phaseIds_</code></td><td><code>string[]</code></td><td>Array of identifiers of <code>phases</code> - can be empty.</td></tr>
<tr><td><code>phases</code></td><td><code>ISharedInternal.Phase[]</code></td><td>Array of {ISharedInternal.Phase[} to be saved - can be empty.</td></tr>
</tbody></table>
</div>
<h3 id="openigo-1"><a class="header" href="#openigo-1">openIGO</a></h3>
<pre><code class="language-solidity">function openIGO() external override onlyRole(DEFAULT_ADMIN_ROLE);
</code></pre>
<h3 id="pauseigo-1"><a class="header" href="#pauseigo-1">pauseIGO</a></h3>
<pre><code class="language-solidity">function pauseIGO() external override onlyRole(DEFAULT_ADMIN_ROLE);
</code></pre>
<h3 id="updategrandtotal-1"><a class="header" href="#updategrandtotal-1">updateGrandTotal</a></h3>
<pre><code class="language-solidity">function updateGrandTotal(uint256 grandTotal_) external override onlyRole(DEFAULT_ADMIN_ROLE);
</code></pre>
<h3 id="recoverlosterc20-1"><a class="header" href="#recoverlosterc20-1">recoverLostERC20</a></h3>
<p><em>Retrieve any ERC20 sent to the contract by mistake.</em></p>
<pre><code class="language-solidity">function recoverLostERC20(address token, address to) external override onlyRole(DEFAULT_ADMIN_ROLE);
</code></pre>
<h3 id="setowner-1"><a class="header" href="#setowner-1">setOwner</a></h3>
<p><em>IGO will always be deployed by IGOFactory using Clones.cloneDeterministic.
Deployment and owner is set in same transaction IGOFactory.createIGO so no one can front run
the IGOFactory for owner rights.</em></p>
<pre><code class="language-solidity">function setOwner() external override initializer;
</code></pre>
<h3 id="updatesetphase-1"><a class="header" href="#updatesetphase-1">updateSetPhase</a></h3>
<p><em>Update or create a phase with all its data.</em></p>
<pre><code class="language-solidity">function updateSetPhase(string calldata phaseId_, ISharedInternal.Phase calldata phase_)
    external
    override
    onlyRole(DEFAULT_ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>phaseId_</code></td><td><code>string</code></td><td>Identifier of phase to set or update.</td></tr>
<tr><td><code>phase_</code></td><td><code>ISharedInternal.Phase</code></td><td>Struct {ISharedInternal.Phase} containing phase's data to be saved.</td></tr>
</tbody></table>
</div>
<h3 id="updatesetphases-1"><a class="header" href="#updatesetphases-1">updateSetPhases</a></h3>
<p><em>Update or create multiple phases with all their data.</em></p>
<pre><code class="language-solidity">function updateSetPhases(string[] calldata phaseIdentifiers_, ISharedInternal.Phase[] calldata phases_)
    public
    override
    onlyRole(DEFAULT_ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>phaseIdentifiers_</code></td><td><code>string[]</code></td><td>Array of identifiers of <code>phases</code>.</td></tr>
<tr><td><code>phases_</code></td><td><code>ISharedInternal.Phase[]</code></td><td>Array of struct {ISharedInternal.Phase} containing phases' data to be saved.</td></tr>
</tbody></table>
</div>
<h3 id="openphase-1"><a class="header" href="#openphase-1">openPhase</a></h3>
<pre><code class="language-solidity">function openPhase(string calldata phaseId) external override onlyRole(DEFAULT_ADMIN_ROLE);
</code></pre>
<h3 id="pausephase-1"><a class="header" href="#pausephase-1">pausePhase</a></h3>
<pre><code class="language-solidity">function pausePhase(string calldata phaseId) external override onlyRole(DEFAULT_ADMIN_ROLE);
</code></pre>
<h3 id="updatephasemerkleroot-1"><a class="header" href="#updatephasemerkleroot-1">updatePhaseMerkleRoot</a></h3>
<p>Update the merkle root of a phase to update a single or multiple wallet allocation,
refund fee, payment token etc.</p>
<pre><code class="language-solidity">function updatePhaseMerkleRoot(string calldata phaseId, bytes32 merkleRoot)
    external
    override
    onlyRole(DEFAULT_ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>phaseId</code></td><td><code>string</code></td><td>Identifier of the phase.</td></tr>
<tr><td><code>merkleRoot</code></td><td><code>bytes32</code></td><td>New merkle root to be saved for this phase.</td></tr>
</tbody></table>
</div>
<h3 id="updatephasestartdate-1"><a class="header" href="#updatephasestartdate-1">updatePhaseStartDate</a></h3>
<pre><code class="language-solidity">function updatePhaseStartDate(string calldata phaseId, uint128 startAt)
    external
    override
    onlyRole(DEFAULT_ADMIN_ROLE);
</code></pre>
<h3 id="updatephaseenddate-1"><a class="header" href="#updatephaseenddate-1">updatePhaseEndDate</a></h3>
<pre><code class="language-solidity">function updatePhaseEndDate(string calldata phaseId, uint128 endAt) external override onlyRole(DEFAULT_ADMIN_ROLE);
</code></pre>
<h3 id="updatephasemaxcap-1"><a class="header" href="#updatephasemaxcap-1">updatePhaseMaxCap</a></h3>
<pre><code class="language-solidity">function updatePhaseMaxCap(string calldata phaseId, uint256 maxPhaseCap)
    external
    override
    onlyRole(DEFAULT_ADMIN_ROLE);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="restrictedwritableinternal"><a class="header" href="#restrictedwritableinternal">RestrictedWritableInternal</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/writable/restricted/RestrictedWritableInternal.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/writable/restricted/RestrictedWritableInternal.sol//src/writable/restricted/IRestrictedWritableInternal.sol/interface.IRestrictedWritableInternal.html">IRestrictedWritableInternal</a></p>
<p>Defines the internal functions of <code>RestrictedWritable</code> contract.</p>
<h2 id="functions-13"><a class="header" href="#functions-13">Functions</a></h2>
<h3 id="_setphase"><a class="header" href="#_setphase">_setPhase</a></h3>
<p>Set the data of phase or update it if it already exists.</p>
<pre><code class="language-solidity">function _setPhase(
    uint256 grandTotal,
    uint256 summedMaxPhaseCap,
    uint256 oldMaxPhaseCap,
    ISharedInternal.Phase calldata phase_,
    string calldata phaseId_
) internal returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>grandTotal</code></td><td><code>uint256</code></td><td>The maximum amount that can be raised for this IGO, over all phase.</td></tr>
<tr><td><code>summedMaxPhaseCap</code></td><td><code>uint256</code></td><td>The sum of all max amount to raise per phase before updating this phase.</td></tr>
<tr><td><code>oldMaxPhaseCap</code></td><td><code>uint256</code></td><td>The max amount to raise for the phase before updating it.</td></tr>
<tr><td><code>phase_</code></td><td><code>ISharedInternal.Phase</code></td><td>The phase's data to save.</td></tr>
<tr><td><code>phaseId_</code></td><td><code>string</code></td><td>The phase identifier.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The new value of <code>summedMaxPhaseCap</code> after the phase has been set/updated.</td></tr>
</tbody></table>
</div>
<h3 id="_setphases"><a class="header" href="#_setphases">_setPhases</a></h3>
<p>Set the data of multiple phases or update them if they already exist.</p>
<pre><code class="language-solidity">function _setPhases(string[] calldata phaseIdentifiers_, ISharedInternal.Phase[] calldata phases_) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>phaseIdentifiers_</code></td><td><code>string[]</code></td><td>The identifiers of phases.</td></tr>
<tr><td><code>phases_</code></td><td><code>ISharedInternal.Phase[]</code></td><td>The data of each phase to set.</td></tr>
</tbody></table>
</div>
<h3 id="_isemptyphase"><a class="header" href="#_isemptyphase">_isEmptyPhase</a></h3>
<p>Verify that none of the phase's data is empty.</p>
<pre><code class="language-solidity">function _isEmptyPhase(ISharedInternal.Phase calldata phase_) internal view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>phase_</code></td><td><code>ISharedInternal.Phase</code></td><td>The phase's data to verify.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>True if the phase is empty, false otherwise.</td></tr>
</tbody></table>
</div>
<h3 id="_issummedmaxphasecapltegrandtotal"><a class="header" href="#_issummedmaxphasecapltegrandtotal">_isSummedMaxPhaseCapLteGrandTotal</a></h3>
<p>Verify whether the sum of all max amount to raise per phase is lower than or equal to the
grand total.</p>
<p><em>reverts if <code>summedMaxPhaseCap</code> is greater than <code>grandTotal</code>.</em></p>
<pre><code class="language-solidity">function _isSummedMaxPhaseCapLteGrandTotal(uint256 summedMaxPhaseCap, uint256 grandTotal) internal pure;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="igowritable"><a class="header" href="#igowritable">IGOWritable</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/writable/IGOWritable.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/writable/IGOWritable.sol//src/writable/IIGOWritable.sol/interface.IIGOWritable.html">IIGOWritable</a>, <a href="src/writable/IGOWritable.sol//src/writable/IGOWritableInternal.sol/contract.IGOWritableInternal.html">IGOWritableInternal</a>, <a href="src/writable/IGOWritable.sol//src/writable/restricted/RestrictedWritable.sol/contract.RestrictedWritable.html">RestrictedWritable</a>, ReentrancyGuard</p>
<p>Public and external functions which modify the storage of the IGO.</p>
<h2 id="functions-14"><a class="header" href="#functions-14">Functions</a></h2>
<h3 id="reserveallocation"><a class="header" href="#reserveallocation">reserveAllocation</a></h3>
<p>Reserve an allocation on-chain for a specific phase.</p>
<pre><code class="language-solidity">function reserveAllocation(
    uint256 amount,
    Allocation calldata allocation,
    bytes32[] calldata proof,
    BuyPermission calldata permission
) external override nonReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount of tokens to buy in this transaction, expressed in {IGOStorage.SetUp.paymentToken}.</td></tr>
<tr><td><code>allocation</code></td><td><code>Allocation</code></td><td>Allocation generated for a wallet for a specific phase.</td></tr>
<tr><td><code>proof</code></td><td><code>bytes32[]</code></td><td>Merkle proof to verify the validity of the allocation.</td></tr>
<tr><td><code>permission</code></td><td><code>BuyPermission</code></td><td>Permission granted by user off-chain using {Permit2}.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="igowritableinternal"><a class="header" href="#igowritableinternal">IGOWritableInternal</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/writable/IGOWritableInternal.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/writable/IGOWritableInternal.sol//src/writable/IIGOWritableInternal.sol/interface.IIGOWritableInternal.html">IIGOWritableInternal</a></p>
<p>Defines internal functions for <code>IGOWritable</code>.</p>
<p><em>Inherit from <code>ISharedInternal</code> will create <code>error[5005]: Linearization of inheritance graph impossible</code></em></p>
<h2 id="functions-15"><a class="header" href="#functions-15">Functions</a></h2>
<h3 id="_reserveallocation"><a class="header" href="#_reserveallocation">_reserveAllocation</a></h3>
<p><em>sends ERC20 from <code>msg.sender</code> to {IGOVesting}.</em></p>
<pre><code class="language-solidity">function _reserveAllocation(IGOStorage.SetUp memory setUp, uint256 amount, BuyPermission calldata permission)
    internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>setUp</code></td><td><code>IGOStorage.SetUp</code></td><td>{IGOStorage.SetUp} storage struct.</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount of tokens to buy in this transaction, expressed in <code>setUp.paymentToken</code>.</td></tr>
<tr><td><code>permission</code></td><td><code>BuyPermission</code></td><td>Struct containing buy permision signed by <code>msg.sender</code> to use with {Permit2} library.</td></tr>
</tbody></table>
</div>
<h3 id="_closeigo"><a class="header" href="#_closeigo">_closeIGO</a></h3>
<p><em>declare {Permit2.permitTransferFrom} parameters</em></p>
<p><em>configure {Permit2.permitTransferFrom} parameters using IGO and allocation parameters</em></p>
<p><em>{Permit2} library call</em></p>
<pre><code class="language-solidity">function _closeIGO() internal;
</code></pre>
<h3 id="_closephase"><a class="header" href="#_closephase">_closePhase</a></h3>
<pre><code class="language-solidity">function _closePhase(string memory phaseId) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>phaseId</code></td><td><code>string</code></td><td>Phase identifier to close.</td></tr>
</tbody></table>
</div>
<h3 id="_updatestorageonbuy"><a class="header" href="#_updatestorageonbuy">_updateStorageOnBuy</a></h3>
<p>Update storage of the IGO when an allocation is reserved on-chain: total raised, total raised
in phase, allocation reserved by buyer in phase, etc...</p>
<pre><code class="language-solidity">function _updateStorageOnBuy(
    uint256 amount,
    string calldata phaseId,
    address buyer,
    uint256 grandTotal,
    uint256 maxPhaseCap
) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount of tokens bought in this transaction, expressed in {IGOStorage.SetUp.paymentToken}.</td></tr>
<tr><td><code>phaseId</code></td><td><code>string</code></td><td>Phase linked to current allocation used by buyer.</td></tr>
<tr><td><code>buyer</code></td><td><code>address</code></td><td>Wallet buying tokens.</td></tr>
<tr><td><code>grandTotal</code></td><td><code>uint256</code></td><td>Total amount of tokens to be sold in this IGO, expressed in {IGOStorage.SetUp.paymentToken}.</td></tr>
<tr><td><code>maxPhaseCap</code></td><td><code>uint256</code></td><td>Maximum amount of tokens to be sold in this phase, expressed in {IGOStorage.SetUp.paymentToken}.</td></tr>
</tbody></table>
</div>
<h3 id="_requireallocationnotexceededinphase"><a class="header" href="#_requireallocationnotexceededinphase">_requireAllocationNotExceededInPhase</a></h3>
<p>Ensure a wallet can not buy more than their allocation for the given phase.</p>
<pre><code class="language-solidity">function _requireAllocationNotExceededInPhase(uint256 toBuy, address buyer, uint256 allocated, string calldata phaseId)
    internal
    view;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>toBuy</code></td><td><code>uint256</code></td><td>Amount of tokens to buy in this transaction, expressed in {IGOStorage.SetUp.paymentToken}.</td></tr>
<tr><td><code>buyer</code></td><td><code>address</code></td><td>Wallet buying tokens.</td></tr>
<tr><td><code>allocated</code></td><td><code>uint256</code></td><td>Maximum amount of tokens this wallet can buy in this phase, expressed in {IGOStorage.SetUp.paymentToken}.</td></tr>
<tr><td><code>phaseId</code></td><td><code>string</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="_requireauthorizedaccount"><a class="header" href="#_requireauthorizedaccount">_requireAuthorizedAccount</a></h3>
<p>Only <code>msg.sender</code> can buy tokens for themselves according to their allocation.</p>
<pre><code class="language-solidity">function _requireAuthorizedAccount(address account) internal view;
</code></pre>
<h3 id="_requiregrandtotalnotexceeded"><a class="header" href="#_requiregrandtotalnotexceeded">_requireGrandTotalNotExceeded</a></h3>
<p>Verify <code>grandTotal</code> will not be exceeded after purchase.</p>
<pre><code class="language-solidity">function _requireGrandTotalNotExceeded(uint256 toBuy, uint256 grandTotal) internal view;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>toBuy</code></td><td><code>uint256</code></td><td>Amount of tokens to buy in this transaction, expressed in {IGOStorage.SetUp.paymentToken}.</td></tr>
<tr><td><code>grandTotal</code></td><td><code>uint256</code></td><td>Total amount of tokens to be sold in this IGO, expressed in {IGOStorage.SetUp.paymentToken}.</td></tr>
</tbody></table>
</div>
<h3 id="_requireopenedigo"><a class="header" href="#_requireopenedigo">_requireOpenedIGO</a></h3>
<p>Verify IGO is opened.</p>
<pre><code class="language-solidity">function _requireOpenedIGO() internal view;
</code></pre>
<h3 id="_requireopenedphase"><a class="header" href="#_requireopenedphase">_requireOpenedPhase</a></h3>
<p>Verify phase is opened.</p>
<pre><code class="language-solidity">function _requireOpenedPhase(string memory phaseId) internal;
</code></pre>
<h3 id="_requirephasecapnotexceeded"><a class="header" href="#_requirephasecapnotexceeded">_requirePhaseCapNotExceeded</a></h3>
<p>Verify <code>maxPhaseCap</code> will not be exceeded after purchase.</p>
<pre><code class="language-solidity">function _requirePhaseCapNotExceeded(string calldata phaseId, uint256 maxPhaseCap, uint256 toBuy) internal view;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>phaseId</code></td><td><code>string</code></td><td>Phase linked to current allocation used by buyer.</td></tr>
<tr><td><code>maxPhaseCap</code></td><td><code>uint256</code></td><td>Maximum amount of tokens to be sold in this phase, expressed in {IGOStorage.SetUp.paymentToken}.</td></tr>
<tr><td><code>toBuy</code></td><td><code>uint256</code></td><td>Amount of tokens to buy in this transaction, expressed in {IGOStorage.SetUp.paymentToken}.</td></tr>
</tbody></table>
</div>
<h3 id="_requirevalidallocation"><a class="header" href="#_requirevalidallocation">_requireValidAllocation</a></h3>
<p>Verify allocation is valid.</p>
<pre><code class="language-solidity">function _requireValidAllocation(Allocation calldata allocation, bytes32[] calldata proof) internal view;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>allocation</code></td><td><code>Allocation</code></td><td>Allocation to verify.</td></tr>
<tr><td><code>proof</code></td><td><code>bytes32[]</code></td><td>Merkle proof of the allocation.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="iigowritable"><a class="header" href="#iigowritable">IIGOWritable</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/writable/IIGOWritable.sol">Git Source</a></p>
<h2 id="functions-16"><a class="header" href="#functions-16">Functions</a></h2>
<h3 id="reserveallocation-1"><a class="header" href="#reserveallocation-1">reserveAllocation</a></h3>
<p>Reserve an allocation on-chain for a specific phase.</p>
<pre><code class="language-solidity">function reserveAllocation(
    uint256 amount,
    IIGOWritableInternal.Allocation calldata allocation,
    bytes32[] calldata proof,
    IIGOWritableInternal.BuyPermission calldata permission
) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount of tokens to buy in this transaction, expressed in {IGOStorage.SetUp.paymentToken}.</td></tr>
<tr><td><code>allocation</code></td><td><code>IIGOWritableInternal.Allocation</code></td><td>Allocation generated for a wallet for a specific phase.</td></tr>
<tr><td><code>proof</code></td><td><code>bytes32[]</code></td><td>Merkle proof to verify the validity of the allocation.</td></tr>
<tr><td><code>permission</code></td><td><code>IIGOWritableInternal.BuyPermission</code></td><td>Permission granted by user off-chain using {Permit2}.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="iigowritableinternal"><a class="header" href="#iigowritableinternal">IIGOWritableInternal</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/writable/IIGOWritableInternal.sol">Git Source</a></p>
<p>Internal interface of <code>IGOWritable</code> which defines strcutures, events  and errors.</p>
<h2 id="events-4"><a class="header" href="#events-4">Events</a></h2>
<h3 id="allocationreserved"><a class="header" href="#allocationreserved">AllocationReserved</a></h3>
<p>Emitted only in {IGOWritable.reserveAllocation}.</p>
<pre><code class="language-solidity">event AllocationReserved(
    string indexed phaseId, address indexed buyer, uint256 indexed maxAllocation, address paymentToken
);
</code></pre>
<h2 id="errors-6"><a class="header" href="#errors-6">Errors</a></h2>
<h3 id="igowritable_allocationexceeded"><a class="header" href="#igowritable_allocationexceeded">IGOWritable_AllocationExceeded</a></h3>
<p>Thrown when the buyer tries to buy more than {Allocation.maxAllocation}.</p>
<pre><code class="language-solidity">error IGOWritable_AllocationExceeded(uint256 allocation, uint256 exceedsBy);
</code></pre>
<h3 id="igowritable_grandtotalexceeded"><a class="header" href="#igowritable_grandtotalexceeded">IGOWritable_GrandTotalExceeded</a></h3>
<p>Thrown when the grand total to be raised for this IGO is exceeded.</p>
<pre><code class="language-solidity">error IGOWritable_GrandTotalExceeded(uint256 grandTotal, uint256 exceedsBy);
</code></pre>
<h3 id="igowritable_maxphasecapexceeded"><a class="header" href="#igowritable_maxphasecapexceeded">IGOWritable_MaxPhaseCapExceeded</a></h3>
<p>Thrown when the cap (maximum amount) of the current phase is exceeded.</p>
<pre><code class="language-solidity">error IGOWritable_MaxPhaseCapExceeded(string phaseId, uint256 maxPhaseCap, uint256 exceedsBy);
</code></pre>
<h3 id="igowritableinternal_accountnotauthorized"><a class="header" href="#igowritableinternal_accountnotauthorized">IGOWritableInternal_AccountNotAuthorized</a></h3>
<p>Thrown when <code>msg.sender</code> is not the buyer.</p>
<pre><code class="language-solidity">error IGOWritableInternal_AccountNotAuthorized();
</code></pre>
<h3 id="igowritableinternal_allocationnotfound"><a class="header" href="#igowritableinternal_allocationnotfound">IGOWritableInternal_AllocationNotFound</a></h3>
<p>Thrown when the allocation is not found in the merkle proof.</p>
<pre><code class="language-solidity">error IGOWritableInternal_AllocationNotFound();
</code></pre>
<h3 id="igowritableinternal_igonotopened"><a class="header" href="#igowritableinternal_igonotopened">IGOWritableInternal_IGONotOpened</a></h3>
<p>Thrown when the IGO is not opened.</p>
<pre><code class="language-solidity">error IGOWritableInternal_IGONotOpened(ISharedInternal.Status current);
</code></pre>
<h3 id="igowritableinternal_phasenotopened"><a class="header" href="#igowritableinternal_phasenotopened">IGOWritableInternal_PhaseNotOpened</a></h3>
<p>Thrown when the phase is not opened.</p>
<pre><code class="language-solidity">error IGOWritableInternal_PhaseNotOpened(string phaseId, ISharedInternal.Status current);
</code></pre>
<h2 id="structs-4"><a class="header" href="#structs-4">Structs</a></h2>
<h3 id="allocation"><a class="header" href="#allocation">Allocation</a></h3>
<p>Struct representing an allocation of a wallet for a specific phase for
{IGOWritable.reserveAllocation} function.</p>
<p>*Backend is in charge of generating an allocation, which will depends on the sale type:</p>
<ul>
<li>IGO: allocation based on the tier from which wallet is part of,</li>
<li>VPR: allocation based on off-chain actions, e.g.
social task: +50% from base price,
in-game tasks: +33% from base price,
etc...*</li>
</ul>
<pre><code class="language-solidity">struct Allocation {
    string phaseId;
    address account;
    uint256 maxAllocation;
    uint256 refundFee;
    uint256 igoTokenPerPaymentToken;
}
</code></pre>
<h3 id="buypermission"><a class="header" href="#buypermission">BuyPermission</a></h3>
<p>Struct representing a buy permission signed by <code>msg.sender</code> for
{IGOWritable.reserveAllocation} function to use with {Permit2} library.</p>
<p><em>Compulsory to interact with {Permit2.permitTransferFrom} in
{IGOWritableInternal._reserveAllocation}.</em></p>
<pre><code class="language-solidity">struct BuyPermission {
    bytes signature;
    uint256 deadline;
    uint256 nonce;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="igo"><a class="header" href="#igo">IGO</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/IGO.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/IGO.sol//src/readable/IGOReadable.sol/contract.IGOReadable.html">IGOReadable</a>, <a href="src/IGO.sol//src/writable/IGOWritable.sol/contract.IGOWritable.html">IGOWritable</a></p>
<p><strong>Author:</strong>
https://github.com/Theo6890</p>
<p>The IGO contract is splitted in different submodules which are inherited by <code>IGOReadable</code> and
<code>IGOWritable</code>.</p>
<p><em>Constructor has been replaced by the <code>initialize</code> function in {IGOWritable}.</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="igostorage"><a class="header" href="#igostorage">IGOStorage</a></h1>
<p><a href="https://github.com/Seedifyfund/igo-all-in-one/blob/a1ea820db2935e9447d34ebcb53a8023a304fcce/src/IGOStorage.sol">Git Source</a></p>
<p><strong>Author:</strong>
https://github.com/Theo6890</p>
<p>Mapps the storage layout of the {IGO} contract.</p>
<p><em>Diamond proxy (ERC-2535) storage style.</em></p>
<h2 id="state-variables-3"><a class="header" href="#state-variables-3">State Variables</a></h2>
<h3 id="igo_storage"><a class="header" href="#igo_storage">IGO_STORAGE</a></h3>
<p>Storage position of {IGOStruct} in {IGO} contract.</p>
<pre><code class="language-solidity">bytes32 public constant IGO_STORAGE = keccak256(&quot;igo.storage&quot;);
</code></pre>
<h2 id="functions-17"><a class="header" href="#functions-17">Functions</a></h2>
<h3 id="layout-1"><a class="header" href="#layout-1">layout</a></h3>
<pre><code class="language-solidity">function layout() internal pure returns (IGOStruct storage igoStruct);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>igoStruct</code></td><td><code>IGOStruct</code></td><td>Whole storage of {IGO} contract.</td></tr>
</tbody></table>
</div>
<h2 id="structs-5"><a class="header" href="#structs-5">Structs</a></h2>
<h3 id="setup-2"><a class="header" href="#setup-2">SetUp</a></h3>
<p>Struct reprensenting the main setup of the IGO.</p>
<pre><code class="language-solidity">struct SetUp {
    address vestingContract;
    address paymentToken;
    address permit2;
    uint256 grandTotal;
    uint256 summedMaxPhaseCap;
    uint256 refundFeeDecimals;
}
</code></pre>
<h3 id="phases"><a class="header" href="#phases">Phases</a></h3>
<p>Struct reprensenting the setup of each phase of the IGO.</p>
<p><em>Status of the phase is the only value that can be updated by IGO contract itself due to user's
interactions with the contract.</em></p>
<pre><code class="language-solidity">struct Phases {
    string[] ids;
    mapping(string =&gt; ISharedInternal.Phase) data;
}
</code></pre>
<h3 id="ledger"><a class="header" href="#ledger">Ledger</a></h3>
<p>Struct reprensenting data of the IGO which are always updated by user's interactions with
the IGO contract.</p>
<pre><code class="language-solidity">struct Ledger {
    ISharedInternal.Status status;
    uint256 totalRaised;
    mapping(string =&gt; uint256) raisedInPhase;
    mapping(address =&gt; mapping(string =&gt; uint256)) allocationReservedByIn;
}
</code></pre>
<h3 id="igostruct"><a class="header" href="#igostruct">IGOStruct</a></h3>
<p>Struct reprensenting the whole storage layout of the IGO contract.</p>
<pre><code class="language-solidity">struct IGOStruct {
    SetUp setUp;
    Phases phases;
    Ledger ledger;
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="solidity.min.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
